{:package "stack-editor",
 :files {"updater.router" {:ns ["ns" "stack-editor.updater.router"],
                           :defs {"toggle-palette" ["defn"
                                                    "toggle-palette"
                                                    ["store" "op-data" "op-id"]
                                                    ["update-in" "store" ["[]" ":router" ":show-palette?"] "not"]],
                                  "route" ["defn"
                                           "route"
                                           ["store" "op-data"]
                                           ["let" [["router" "op-data"]] ["assoc" "store" ":router" "router"]]]},
                           :procs []},
         "comp.loading" {:ns ["ns"
                              "stack-editor.comp.loading"
                              [":require"
                               ["[]" "hsl.core" ":refer" ["[]" "hsl"]]
                               ["[]" "respo.alias" ":refer" ["[]" "create-comp" "div"]]
                               ["[]" "respo.comp.text" ":refer" ["[]" "comp-text"]]
                               ["[]" "respo-ui.style" ":as" "ui"]]],
                         :defs {"comp-loading" ["def"
                                                "comp-loading"
                                                ["create-comp"
                                                 ":loading"
                                                 ["fn"
                                                  []
                                                  ["fn"
                                                   ["cursor"]
                                                   ["div"
                                                    ["{}"
                                                     [":style"
                                                      ["merge" "ui/fullscreen" "ui/row-center" "style-loading"]]]
                                                    ["comp-text" "|Loading..." "nil"]]]]]],
                                "style-loading" ["def"
                                                 "style-loading"
                                                 ["{}"
                                                  [":background-color" ["hsl" "200" "40" "10"]]
                                                  [":justify-content" "|center"]
                                                  [":color" ["hsl" "0" "0" "80"]]
                                                  [":font-size" "|32px"]
                                                  [":font-weight" "|100"]
                                                  [":font-family" "|Josefin Sans"]]]},
                         :procs []},
         "comp.command" {:ns ["ns"
                              "stack-editor.comp.command"
                              [":require"
                               ["[]" "clojure.string" ":as" "string"]
                               ["[]" "hsl.core" ":refer" ["[]" "hsl"]]
                               ["[]" "respo.alias" ":refer" ["[]" "create-comp" "div"]]
                               ["[]" "respo.comp.text" ":refer" ["[]" "comp-text"]]]],
                         :defs {"style-command" ["def"
                                                 "style-command"
                                                 ["{}"
                                                  [":backgroud-color" ["hsl" "0" "0" "0"]]
                                                  [":padding" "|0 8px"]
                                                  [":line-height" "2.4"]
                                                  [":font-family" "|Source Code Pro, Menlo,monospace"]
                                                  [":cursor" "|pointer"]]],
                                "on-click" ["defn"
                                            "on-click"
                                            ["on-select"]
                                            ["fn" ["e" "dispatch!"] ["on-select" "dispatch!"]]],
                                "comp-command" ["def"
                                                "comp-command"
                                                ["create-comp"
                                                 ":command"
                                                 ["fn"
                                                  ["command" "selected?" "on-select"]
                                                  ["fn"
                                                   ["cursor"]
                                                   ["div"
                                                    ["{}"
                                                     [":style"
                                                      ["merge"
                                                       "style-command"
                                                       ["if"
                                                        "selected?"
                                                        ["{}" [":background-color" ["hsl" "0" "0" "30"]]]]]]
                                                     [":event" ["{}" [":click" ["on-click" "on-select"]]]]]
                                                    ["comp-text" ["string/join" "| " "command"] "nil"]]]]]]},
                         :procs []},
         "util.keycode" {:ns ["ns" "stack-editor.util.keycode"],
                         :defs {"key-esc" ["def" "key-esc" "27"],
                                "key-u" ["def" "key-u" "85"],
                                "key-down" ["def" "key-down" "40"],
                                "key-s" ["def" "key-s" "83"],
                                "key-d" ["def" "key-d" "68"],
                                "key-j" ["def" "key-j" "74"],
                                "key-a" ["def" "key-a" "65"],
                                "key-k" ["def" "key-k" "75"],
                                "key-p" ["def" "key-p" "80"],
                                "key-enter" ["def" "key-enter" "13"],
                                "key-b" ["def" "key-b" "66"],
                                "key-up" ["def" "key-up" "38"],
                                "key-e" ["def" "key-e" "69"]},
                         :procs []},
         "updater.stack" {:ns ["ns"
                               "stack-editor.updater.stack"
                               [":require"
                                ["[]" "clojure.string" ":as" "string"]
                                ["[]"
                                 "stack-editor.util.analyze"
                                 ":refer"
                                 ["[]" "locate-ns" "compute-ns" "list-dependent-ns" "pick-rule"]]
                                ["[]"
                                 "stack-editor.util.detect"
                                 ":refer"
                                 ["[]" "strip-atom" "tree-contains?" "contains-def?"]]
                                ["[]"
                                 "stack-editor.util"
                                 ":refer"
                                 ["[]" "remove-idx" "helper-notify" "helper-create-def" "helper-put-path" "make-path"]]]],
                          :defs {"collapse" ["defn"
                                             "collapse"
                                             ["store" "op-data" "op-id"]
                                             ["let"
                                              [["cursor" "op-data"]]
                                              ["update"
                                               "store"
                                               ":writer"
                                               ["fn"
                                                ["writer"]
                                                ["->"
                                                 "writer"
                                                 ["assoc" ":pointer" "0"]
                                                 ["update" ":stack" ["fn" ["stack"] ["subvec" "stack" "cursor"]]]]]]]],
                                 "goto-definition" ["defn"
                                                    "goto-definition"
                                                    ["store" "op-data" "op-id"]
                                                    ["let"
                                                     [["forced?" "op-data"]
                                                      ["writer" [":writer" "store"]]
                                                      ["pointer" [":pointer" "writer"]]
                                                      ["stack" [":stack" "writer"]]
                                                      ["pointer" [":pointer" "writer"]]
                                                      ["pkg" ["get-in" "store" ["[]" ":collection" ":package"]]]
                                                      ["files" ["get-in" "store" ["[]" ":collection" ":files"]]]
                                                      ["code-path" ["get" "stack" "pointer"]]
                                                      ["focus" [":focus" "code-path"]]
                                                      [["{}"
                                                        ["current-ns" ":ns"]
                                                        ["kind" ":kind"]
                                                        ["extra-name" ":extra"]]
                                                       "code-path"]
                                                      ["drop-pkg"
                                                       ["fn"
                                                        ["x"]
                                                        ["if"
                                                         ["string?" "x"]
                                                         ["string/replace" "x" ["str" "pkg" "|."] "|"]
                                                         "x"]]]]
                                                     ["let"
                                                      [["target"
                                                        ["get-in" "store" ["concat" ["make-path" "code-path"] "focus"]]]]
                                                      ["if"
                                                       ["string?" "target"]
                                                       ["let"
                                                        [["stripped-target" ["strip-atom" "target"]]]
                                                        ["if"
                                                         "forced?"
                                                         ["if"
                                                          ["string/includes?" "stripped-target" "|/"]
                                                          ["let"
                                                           [[["[]" "ns-part" "var-part"]
                                                             ["string/split" "stripped-target" "|/"]]
                                                            ["that-ns"
                                                             ["drop-pkg" ["locate-ns" "ns-part" "current-ns" "files"]]]]
                                                           ["if"
                                                            ["contains?" "files" "that-ns"]
                                                            ["if"
                                                             ["contains-def?" "files" "that-ns" "var-part"]
                                                             ["update"
                                                              "store"
                                                              ":writer"
                                                              ["helper-put-path" "that-ns" "var-part"]]
                                                             ["->"
                                                              "store"
                                                              ["update-in"
                                                               ["[]" ":collection" ":files"]
                                                               ["helper-create-def"
                                                                "that-ns"
                                                                "var-part"
                                                                "code-path"
                                                                "focus"]]
                                                              ["update"
                                                               ":writer"
                                                               ["helper-put-path" "that-ns" "var-part"]]]]
                                                            ["->"
                                                             "store"
                                                             ["update"
                                                              ":notifications"
                                                              ["helper-notify"
                                                               "op-id"
                                                               ["str" "|foreign namespace: " "that-ns"]]]]]]
                                                          ["let"
                                                           [["ns-part"
                                                             ["compute-ns" "stripped-target" "current-ns" "files"]]
                                                            ["that-ns"
                                                             ["if"
                                                              ["some?" "ns-part"]
                                                              ["drop-pkg" "ns-part"]
                                                              "current-ns"]]]
                                                           ["println" "|forced piece:" "that-ns" "stripped-target"]
                                                           ["if"
                                                            ["contains?" "files" "that-ns"]
                                                            ["->"
                                                             "store"
                                                             ["update-in"
                                                              ["[]" ":collection" ":files"]
                                                              ["helper-create-def"
                                                               "that-ns"
                                                               "stripped-target"
                                                               "code-path"
                                                               "focus"]]
                                                             ["update"
                                                              ":writer"
                                                              ["helper-put-path" "that-ns" "stripped-target"]]]
                                                            ["->"
                                                             "store"
                                                             ["update"
                                                              ":notifications"
                                                              ["helper-notify"
                                                               "op-id"
                                                               ["str" "|foreign namespace: " "that-ns"]]]]]]]
                                                         ["let"
                                                          [["that-ns"
                                                            ["drop-pkg"
                                                             ["compute-ns" "stripped-target" "current-ns" "files"]]]
                                                           ["var-part" ["last" ["string/split" "stripped-target" "|/"]]]]
                                                          ["println"
                                                           "|Search result:"
                                                           "that-ns"
                                                           "var-part"
                                                           "current-ns"]
                                                          ["if"
                                                           ["contains-def?" "files" "that-ns" "var-part"]
                                                           ["if"
                                                            ["="
                                                             "code-path"
                                                             ["{}"
                                                              [":ns" "that-ns"]
                                                              [":kind" ":defs"]
                                                              [":extra" "var-part"]]]
                                                            "store"
                                                            ["update"
                                                             "store"
                                                             ":writer"
                                                             ["helper-put-path" "that-ns" "var-part"]]]
                                                           ["->"
                                                            "store"
                                                            ["update"
                                                             ":notifications"
                                                             ["helper-notify"
                                                              "op-id"
                                                              ["str" "|no namespace for: " "stripped-target"]]]]]]]]
                                                       "store"]]]],
                                 "go-next" ["defn"
                                            "go-next"
                                            ["store" "op-data"]
                                            ["->"
                                             "store"
                                             ["update"
                                              ":writer"
                                              ["fn"
                                               ["writer"]
                                               ["if"
                                                ["<" [":pointer" "writer"] ["dec" ["count" [":stack" "writer"]]]]
                                                ["->" "writer" ["update" ":pointer" "inc"] ["assoc" ":focus" ["[]"]]]
                                                "writer"]]]]],
                                 "dependents" ["defn"
                                               "dependents"
                                               ["store" "op-data" "op-id"]
                                               ["println" "|Dependents:" "op-data"]
                                               ["let"
                                                [["writer" [":writer" "store"]]
                                                 ["stack" [":stack" "writer"]]
                                                 ["pointer" [":pointer" "writer"]]
                                                 ["code-path" ["get" "stack" "pointer"]]
                                                 [["{}" ["ns-part" ":ns"] ["kind" ":kind"] ["extra-name" ":extra"]]
                                                  "code-path"]
                                                 ["sepal-ir" [":collection" "store"]]
                                                 ["former-stack" ["subvec" "stack" "0" ["inc" "pointer"]]]
                                                 ["pkg" [":package" "sepal-ir"]]]
                                                ["case"
                                                 "kind"
                                                 [":defs"
                                                  ["let"
                                                   [["ns-list"
                                                     ["list-dependent-ns" "ns-part" [":files" "sepal-ir"] "pkg"]]
                                                    ["ns-list-more" ["cons" "ns-part" "ns-list"]]
                                                    ["new-paths"
                                                     ["->>"
                                                      "ns-list-more"
                                                      ["map"
                                                       ["fn"
                                                        ["ns-name"]
                                                        ["let"
                                                         [["file" ["get-in" "sepal-ir" ["[]" ":files" "ns-name"]]]
                                                          ["the-ns-rule" ["pick-rule" [":ns" "file"] "ns-part" "pkg"]]
                                                          ["method" ["get" "the-ns-rule" "2"]]
                                                          ["some-defs" [":defs" "file"]]]
                                                         ["--" "println" "|Trying ns:" "ns-name" "method" "the-ns-rule"]
                                                         ["if"
                                                          ["and"
                                                           ["=" "method" "|:refer"]
                                                           ["let"
                                                            [["referred-defs"
                                                              ["into" ["#{}"] ["subvec" ["get" "the-ns-rule" "3"] "1"]]]]
                                                            ["println" "|Trying refer:" "referred-defs" "extra-name"]
                                                            ["not" ["contains?" "referred-defs" "extra-name"]]]]
                                                          ["list"]
                                                          ["let"
                                                           [["target-name"
                                                             ["if"
                                                              ["=" "method" "|:refer"]
                                                              "extra-name"
                                                              ["str" ["get" "the-ns-rule" "3"] "extra-name"]]]
                                                            ["matched-defs"
                                                             ["->>"
                                                              "some-defs"
                                                              ["filter"
                                                               ["fn"
                                                                ["entry"]
                                                                ["let"
                                                                 [[["[]" "name-part" "tree"] "entry"]]
                                                                 ["--"
                                                                  "println"
                                                                  "|Detecting def:"
                                                                  "ns-name"
                                                                  "name-part"]
                                                                 ["tree-contains?" ["subvec" "tree" "2"] "extra-name"]]]]
                                                              ["map"
                                                               ["fn"
                                                                ["entry"]
                                                                ["{}"
                                                                 [":ns" "ns-name"]
                                                                 [":kind" ":defs"]
                                                                 [":extra" ["first" "entry"]]
                                                                 [":focus" ["[]"]]]]]]]
                                                            ["proc-matching?"
                                                             ["tree-contains?" [":procs" "file"] "extra-name"]]]
                                                           ["if"
                                                            "proc-matching?"
                                                            ["cons" ["[]" "ns-name" ":procs"] "matched-defs"]
                                                            "matched-defs"]]]]]]
                                                      ["filter" ["fn" ["xs"] ["not" ["empty?" "xs"]]]]
                                                      ["apply" "concat"]]]]
                                                   ["println" "|Got new paths:" "new-paths"]
                                                   ["update"
                                                    "store"
                                                    ":writer"
                                                    ["fn"
                                                     ["writer"]
                                                     ["->"
                                                      "writer"
                                                      ["assoc"
                                                       ":stack"
                                                       ["into" ["[]"] ["concat" "former-stack" "new-paths"]]]
                                                      ["assoc"
                                                       ":pointer"
                                                       ["if" ["empty?" "new-paths"] "pointer" ["inc" "pointer"]]]]]]]]
                                                 [":ns"
                                                  ["let"
                                                   [["ns-list"
                                                     ["list-dependent-ns"
                                                      "ns-part"
                                                      [":files" "sepal-ir"]
                                                      [":package" "sepal-ir"]]]
                                                    ["new-paths" ["map" ["fn" ["x"] ["[]" "x" ":ns"]] "ns-list"]]]
                                                   ["--" "println" "former-stack" "new-paths" "pointer"]
                                                   ["update"
                                                    "store"
                                                    ":writer"
                                                    ["fn"
                                                     ["writer"]
                                                     ["->"
                                                      "writer"
                                                      ["assoc"
                                                       ":stack"
                                                       ["into" ["[]"] ["concat" "former-stack" "new-paths"]]]
                                                      ["assoc"
                                                       ":pointer"
                                                       ["if" ["empty?" "ns-list"] "pointer" ["inc" "pointer"]]]
                                                      ["assoc" ":focus" ["[]"]]]]]]]
                                                 "store"]]],
                                 "point-to" ["defn"
                                             "point-to"
                                             ["store" "op-data" "op-id"]
                                             ["let"
                                              [["pointer" "op-data"]]
                                              ["assoc-in" "store" ["[]" ":writer" ":pointer"] "pointer"]]],
                                 "go-back" ["defn"
                                            "go-back"
                                            ["store" "op-data"]
                                            ["->"
                                             "store"
                                             ["update"
                                              ":writer"
                                              ["fn"
                                               ["writer"]
                                               ["if"
                                                ["pos?" [":pointer" "writer"]]
                                                ["->" "writer" ["update" ":pointer" "dec"] ["assoc" ":focus" ["[]"]]]
                                                "writer"]]]]],
                                 "shift-one" ["defn"
                                              "shift-one"
                                              ["store" "op-data" "op-id"]
                                              ["let"
                                               [["pointer" "op-data"]]
                                               ["update"
                                                "store"
                                                ":writer"
                                                ["fn"
                                                 ["writer"]
                                                 ["->"
                                                  "writer"
                                                  ["update" ":stack" ["fn" ["stack"] ["remove-idx" "stack" "pointer"]]]
                                                  ["update"
                                                   ":pointer"
                                                   ["fn"
                                                    ["pointer"]
                                                    ["if"
                                                     ["=" "pointer" ["dec" ["count" [":stack" "writer"]]]]
                                                     ["dec" "pointer"]
                                                     "pointer"]]]]]]]]},
                          :procs []},
         "util.analyze" {:ns ["ns"
                              "stack-editor.util.analyze"
                              [":require"
                               ["[]" "clojure.string" ":as" "string"]
                               ["[]" "stack-editor.util.detect" ":refer" ["[]" "contains-def?"]]]],
                         :defs {"compute-ns" ["defn"
                                              "compute-ns"
                                              ["piece" "current-ns" "files"]
                                              ["println" "|compute-ns" "piece" "current-ns"]
                                              ["if"
                                               ["string/includes?" "piece" "|/"]
                                               ["let"
                                                [[["[]" "that-ns" "that-value"] ["string/split" "piece" "|/"]]]
                                                ["locate-ns" "that-ns" "current-ns" "files"]]
                                               ["if"
                                                ["contains-def?" "files" "current-ns" "piece"]
                                                "current-ns"
                                                ["locate-ns-by-var" "piece" "current-ns" "files"]]]],
                                "locate-ns" ["defn"
                                             "locate-ns"
                                             ["short-form" "current-ns" "files"]
                                             ["if"
                                              ["nil?" "current-ns"]
                                              "nil"
                                              ["if"
                                               ["contains?" "files" "current-ns"]
                                               ["let"
                                                [["ns-data" ["get-in" "files" ["[]" "current-ns" ":ns"]]]]
                                                ["if"
                                                 ["or" ["nil?" "ns-data"] ["<=" ["count" "ns-data"] "2"]]
                                                 "nil"
                                                 ["let"
                                                  [["required" ["get" "ns-data" "2"]]
                                                   ["rules" ["subvec" "required" "1"]]
                                                   ["matched-rule"
                                                    ["->>"
                                                     "rules"
                                                     ["filter"
                                                      ["fn"
                                                       ["rule"]
                                                       ["println" "|rule" "rule" "short-form"]
                                                       ["and"
                                                        ["=" "|:as" ["get" "rule" "2"]]
                                                        ["=" "short-form" ["get" "rule" "3"]]]]]
                                                     ["first"]]]]
                                                  ["println" "|matched-rule" "matched-rule"]
                                                  ["if" ["some?" "matched-rule"] ["get" "matched-rule" "1"] "nil"]]]]
                                               "nil"]]],
                                "locate-ns-by-var" ["defn"
                                                    "locate-ns-by-var"
                                                    ["short-form" "current-ns" "files"]
                                                    ["println" "|ns by var:" "short-form" "current-ns"]
                                                    ["if"
                                                     ["nil?" "current-ns"]
                                                     "nil"
                                                     ["if"
                                                      ["contains?" "files" "current-ns"]
                                                      ["let"
                                                       [["ns-data" ["get-in" "files" ["[]" "current-ns" ":ns"]]]]
                                                       ["println" "|ns-data:" "ns-data"]
                                                       ["if"
                                                        ["and" ["nil?" "ns-data"] ["<=" ["count" "ns-data"] "2"]]
                                                        "nil"
                                                        ["if"
                                                         [">=" ["count" "ns-data"] "3"]
                                                         ["let"
                                                          [["required" ["get" "ns-data" "2"]]
                                                           ["rules" ["subvec" "required" "1"]]
                                                           ["matched-rule"
                                                            ["->>"
                                                             "rules"
                                                             ["filter"
                                                              ["fn"
                                                               ["rule"]
                                                               ["println"
                                                                "|Search rule:"
                                                                "rule"
                                                                "short-form"
                                                                ["=" "|:refer" ["get" "rule" "1"]]]
                                                               ["and"
                                                                ["=" "|:refer" ["get" "rule" "2"]]
                                                                ["some"
                                                                 ["fn" ["definition"] ["=" "definition" "short-form"]]
                                                                 ["get" "rule" "3"]]]]]
                                                             ["first"]]]]
                                                          ["println" "|rules" "matched-rule"]
                                                          ["if"
                                                           ["some?" "matched-rule"]
                                                           ["get" "matched-rule" "1"]
                                                           "nil"]]
                                                         "nil"]]]
                                                      "nil"]]],
                                "list-dependent-ns" ["defn"
                                                     "list-dependent-ns"
                                                     ["ns-name" "files" "pkg"]
                                                     ["let"
                                                      [["full-ns" ["str" "pkg" "|." "ns-name"]]]
                                                      ["->>"
                                                       "files"
                                                       ["filter"
                                                        ["fn"
                                                         ["entry"]
                                                         ["let"
                                                          [[["[]" "ns-part" "file"] "entry"]
                                                           ["ns-rules"
                                                            ["->>"
                                                             ["get-in" "file" ["[]" ":ns" "2"]]
                                                             "rest"
                                                             ["map" ["fn" ["xs"] ["get" "xs" "1"]]]
                                                             ["into" ["#{}"]]]]]
                                                          ["--" "println" "|Search:" "ns-name" "ns-rules"]
                                                          ["contains?" "ns-rules" "full-ns"]]]]
                                                       ["map" "first"]]]],
                                "pick-rule" ["defn"
                                             "pick-rule"
                                             ["ns-block" "ns-name" "pkg"]
                                             ["let"
                                              [["full-ns" ["str" "pkg" "|." "ns-name"]]
                                               ["rules" ["subvec" ["get" "ns-block" "2"] "1"]]]
                                              ["loop"
                                               ["[]" "left-rules" "rules"]
                                               ["if"
                                                ["empty?" "left-rules"]
                                                "nil"
                                                ["let"
                                                 [["cursor" ["first" "left-rules"]]]
                                                 ["--" "println" "|Picking" "cursor" "full-ns"]
                                                 ["if"
                                                  ["=" "full-ns" ["get" "cursor" "1"]]
                                                  "cursor"
                                                  ["recur" ["rest" "left-rules"]]]]]]]]},
                         :procs []},
         "util" {:ns ["ns"
                      "stack-editor.util"
                      [":require" ["[]" "stack-editor.util.detect" ":refer" ["[]" "contains-def?" "=path?"]]]],
                 :defs {"remove-idx" ["defn"
                                      "remove-idx"
                                      ["xs" "idx"]
                                      ["let"
                                       [["xs-size" ["count" "xs"]]]
                                       ["cond"
                                        [["or" [">=" "idx" "xs-size"] ["neg?" "idx"]] "xs"]
                                        [["=" "xs-size" "1"] ["[]"]]
                                        [["zero?" "idx"] ["subvec" "xs" "1"]]
                                        [["=" "idx" ["dec" "xs-size"]] ["subvec" "xs" "0" "idx"]]
                                        [":else"
                                         ["into"
                                          ["[]"]
                                          ["concat" ["subvec" "xs" "0" "idx"] ["subvec" "xs" ["inc" "idx"]]]]]]]],
                        "now!" ["defn" "now!" [] [".now" "js/performance"]],
                        "helper-notify" ["defn"
                                         "helper-notify"
                                         ["op-id" "data"]
                                         ["fn"
                                          ["notifications"]
                                          ["into" ["[]"] ["cons" ["[]" "op-id" "data"] "notifications"]]]],
                        "helper-put-ns" ["defn"
                                         "helper-put-ns"
                                         ["ns-name"]
                                         ["fn"
                                          ["writer"]
                                          ["->"
                                           "writer"
                                           ["update" ":pointer" "inc"]
                                           ["update"
                                            ":stack"
                                            ["fn"
                                             ["stack"]
                                             ["conj"
                                              ["subvec" "stack" "0" ["inc" [":pointer" "writer"]]]
                                              ["{}"
                                               [":ns" "ns-name"]
                                               [":kind" ":ns"]
                                               [":extra" "nil"]
                                               [":focus" ["[]"]]]]]]]]],
                        "make-path" ["defn"
                                     "make-path"
                                     ["info"]
                                     ["let"
                                      [["kind" [":kind" "info"]]]
                                      ["if"
                                       ["=" "kind" ":defs"]
                                       ["[]" ":collection" ":files" [":ns" "info"] ":defs" [":extra" "info"]]
                                       ["[]" ":collection" ":files" [":ns" "info"] "kind"]]]],
                        "helper-create-def" ["defn"
                                             "helper-create-def"
                                             ["ns-part" "name-part" "code-path" "focus"]
                                             ["fn"
                                              ["files"]
                                              ["if"
                                               ["contains-def?" "files" "ns-part" "name-part"]
                                               "files"
                                               ["assoc-in"
                                                "files"
                                                ["[]" "ns-part" ":defs" "name-part"]
                                                ["let"
                                                 [["as-fn?"
                                                   ["and" ["not" ["empty?" "focus"]] ["zero?" ["last" "focus"]]]]]
                                                 ["if"
                                                  "as-fn?"
                                                  ["let"
                                                   [["expression"
                                                     ["get-in"
                                                      "files"
                                                      ["concat" ["make-short-path" "code-path"] ["butlast" "focus"]]]]]
                                                   ["if"
                                                    [">" ["count" "expression"] "1"]
                                                    ["[]" "|defn" "name-part" ["subvec" "expression" "1"]]
                                                    ["[]" "|defn" "name-part" ["[]"]]]]
                                                  ["[]" "|def" "name-part" ["[]"]]]]]]]],
                        "helper-put-path" ["defn"
                                           "helper-put-path"
                                           ["ns-part" "name-part"]
                                           ["fn"
                                            ["writer"]
                                            ["->"
                                             "writer"
                                             ["update"
                                              ":stack"
                                              ["fn"
                                               ["stack"]
                                               ["let"
                                                [["next-pointer" ["inc" [":pointer" "writer"]]]
                                                 ["code-path"
                                                  ["{}"
                                                   [":ns" "ns-part"]
                                                   [":kind" ":defs"]
                                                   [":extra" "name-part"]
                                                   [":focus" ["[]"]]]]]
                                                ["if"
                                                 ["<" ["dec" ["count" "stack"]] "next-pointer"]
                                                 ["conj" "stack" "code-path"]
                                                 ["if"
                                                  ["=path?" "code-path" ["get" "stack" "next-pointer"]]
                                                  "stack"
                                                  ["conj"
                                                   ["into" ["[]"] ["subvec" "stack" "0" "next-pointer"]]
                                                   "code-path"]]]]]]
                                             ["update" ":pointer" "inc"]]]],
                        "make-short-path" ["defn"
                                           "make-short-path"
                                           ["info"]
                                           ["let"
                                            [["kind" [":kind" "info"]]]
                                            ["if"
                                             ["=" "kind" ":defs"]
                                             ["[]" [":ns" "info"] ":defs" [":extra" "info"]]
                                             ["[]" [":ns" "info"] "kind"]]]]},
                 :procs []},
         "comp.workspace" {:ns ["ns"
                                "stack-editor.comp.workspace"
                                [":require"
                                 ["[]" "hsl.core" ":refer" ["[]" "hsl"]]
                                 ["[]" "respo.alias" ":refer" ["[]" "create-comp" "div"]]
                                 ["[]" "respo.cursor" ":refer" ["[]" "with-cursor"]]
                                 ["[]" "respo.comp.text" ":refer" ["[]" "comp-text"]]
                                 ["[]" "respo.comp.space" ":refer" ["[]" "comp-space"]]
                                 ["[]" "respo.comp.debug" ":refer" ["[]" "comp-debug"]]
                                 ["[]" "respo-ui.style" ":as" "ui"]
                                 ["[]" "stack-editor.comp.hot-corner" ":refer" ["[]" "comp-hot-corner"]]
                                 ["[]" "stack-editor.comp.stack" ":refer" ["[]" "comp-stack"]]
                                 ["[]" "cirru-editor.comp.editor" ":refer" ["[]" "comp-editor"]]
                                 ["[]" "stack-editor.util.keycode" ":as" "keycode"]
                                 ["[]" "stack-editor.util.dom" ":as" "dom"]
                                 ["[]" "stack-editor.util" ":refer" ["[]" "make-path"]]
                                 ["[]" "stack-editor.style.widget" ":as" "widget"]]],
                           :defs {"on-command" ["defn"
                                                "on-command"
                                                ["store"]
                                                ["fn"
                                                 ["snapshot" "dispatch!" "e"]
                                                 ["let"
                                                  [["code" [":key-code" "e"]]
                                                   ["event" [":original-event" "e"]]
                                                   ["command?" ["or" [".-metaKey" "event"] [".-ctrlKey" "event"]]]
                                                   ["shift?" [".-shiftKey" "event"]]]
                                                  ["cond"
                                                   [["=" "code" "keycode/key-d"]
                                                    ["do"
                                                     [".preventDefault" "event"]
                                                     ["dispatch!" ":stack/goto-definition" "shift?"]]]
                                                   [["=" "code" "keycode/key-u"]
                                                    ["do"
                                                     [".preventDefault" "event"]
                                                     ["dispatch!" ":stack/dependents" "nil"]]]
                                                   [["=" "code" "keycode/key-k"]
                                                    ["do"
                                                     [".preventDefault" "event"]
                                                     ["dispatch!" ":stack/go-back" "nil"]]]
                                                   [["=" "code" "keycode/key-j"]
                                                    ["do"
                                                     [".preventDefault" "event"]
                                                     ["dispatch!" ":stack/go-next" "nil"]]]
                                                   [["=" "code" "keycode/key-s"]
                                                    ["do"
                                                     [".preventDefault" "event"]
                                                     ["dispatch!" ":effect/submit" "shift?"]]]
                                                   [["and" "command?" ["=" "code" "keycode/key-p"]]
                                                    ["do"
                                                     [".preventDefault" "event"]
                                                     [".stopPropagation" "event"]
                                                     ["dispatch!" ":router/toggle-palette" "nil"]
                                                     ["dom/focus-palette!"]]]
                                                   [["and" "command?" "shift?" ["=" "code" "keycode/key-e"]]
                                                    ["do"
                                                     [".preventDefault" "event"]
                                                     ["dispatch!" ":collection/expand-ns" "nil"]]]
                                                   [["and" "command?" ["not" "shift?"] ["=" "code" "keycode/key-e"]]
                                                    ["do"
                                                     [".preventDefault" "event"]
                                                     ["dispatch!" ":collection/edit-ns" "nil"]]]
                                                   [":else" "nil"]]]]],
                                  "comp-workspace" ["def"
                                                    "comp-workspace"
                                                    ["create-comp"
                                                     ":workspace"
                                                     ["fn"
                                                      ["store"]
                                                      ["fn"
                                                       ["cursor"]
                                                       ["let"
                                                        [["router" [":router" "store"]]
                                                         ["states" [":states" "store"]]
                                                         ["writer" [":writer" "store"]]
                                                         ["stack" ["get-in" "store" ["[]" ":writer" ":stack"]]]
                                                         ["pointer" ["get-in" "store" ["[]" ":writer" ":pointer"]]]
                                                         ["code-path" ["get" "stack" "pointer"]]
                                                         ["tree"
                                                          ["if"
                                                           ["some?" "code-path"]
                                                           ["get-in" "store" ["make-path" "code-path"]]
                                                           "nil"]]]
                                                        ["div"
                                                         ["{}"
                                                          [":style"
                                                           ["merge" "ui/fullscreen" "ui/row" "style-container"]]]
                                                         ["div"
                                                          ["{}" [":style" ["merge" "ui/column" "style-sidebar"]]]
                                                          ["comp-hot-corner" "router" [":writer" "store"]]
                                                          ["comp-stack" "stack" "pointer"]]
                                                         ["--" "comp-debug" "writer" "style-debugger"]
                                                         ["if"
                                                          ["some?" "tree"]
                                                          ["div"
                                                           ["{}" [":style" ["merge" "ui/column" "ui/flex"]]]
                                                           ["with-cursor"
                                                            ":editor"
                                                            ["comp-editor"
                                                             [":editor" "states"]
                                                             ["{}"
                                                              [":tree" "tree"]
                                                              [":focus" [":focus" "code-path"]]
                                                              [":clipboard" [":clipboard" "writer"]]]
                                                             "on-update"
                                                             ["on-command" "store"]]]
                                                           ["div"
                                                            ["{}" [":style" ["merge" "ui/row" "style-toolbar"]]]
                                                            ["div"
                                                             ["{}"
                                                              [":style" "widget/button"]
                                                              [":event" ["{}" [":click" ["on-rename" "code-path"]]]]
                                                              [":attrs" ["{}" [":inner-text" "|Rename"]]]]]
                                                            ["comp-space" "8" "nil"]
                                                            ["div"
                                                             ["{}"
                                                              [":style" "widget/button"]
                                                              [":event" ["{}" [":click" "on-remove"]]]
                                                              [":attrs" ["{}" [":inner-text" "|Remove"]]]]]]]
                                                          ["div"
                                                           ["{}" [":style" ["merge" "ui/column" "ui/flex"]]]
                                                           ["div"
                                                            ["{}" [":style" "style-removed"]]
                                                            ["comp-text" "|Tree is be removed." "nil"]]]]]]]]]],
                                  "on-update" ["defn"
                                               "on-update"
                                               ["snapshot" "dispatch!"]
                                               ["dispatch!" ":collection/write" "snapshot"]],
                                  "style-toolbar" ["def"
                                                   "style-toolbar"
                                                   ["{}"
                                                    [":background-color" ["hsl" "0" "0" "0"]]
                                                    [":justify-content" "|flex-end"]]],
                                  "style-container" ["def"
                                                     "style-container"
                                                     ["{}" [":background-color" ["hsl" "0" "0" "0"]]]],
                                  "style-debugger" ["def"
                                                    "style-debugger"
                                                    ["{}"
                                                     [":z-index" "999"]
                                                     [":background-color" ["hsl" "0" "0" "0"]]
                                                     [":opacity" "1"]]],
                                  "style-sidebar" ["def"
                                                   "style-sidebar"
                                                   ["{}"
                                                    [":width" "|180px"]
                                                    [":background-color" ["hsl" "0" "0" "0"]]
                                                    [":color" ["hsl" "0" "0" "80"]]]],
                                  "on-rename" ["defn"
                                               "on-rename"
                                               ["code-path"]
                                               ["fn"
                                                ["e" "dispatch!"]
                                                ["println" "|the code path:" "code-path"]
                                                ["dispatch!"
                                                 ":modal/mould"
                                                 ["{}" [":title" ":rename-path"] [":data" "code-path"]]]]],
                                  "on-remove" ["defn"
                                               "on-remove"
                                               ["e" "dispatch!"]
                                               ["dispatch!" ":collection/remove-this" "nil"]],
                                  "style-removed" ["def"
                                                   "style-removed"
                                                   ["{}"
                                                    [":margin" "|32px 16px"]
                                                    [":font-size" "|14px"]
                                                    [":font-weight" "|lighter"]
                                                    [":color" ["hsl" "0" "80" "100"]]
                                                    [":background-color" ["hsl" "0" "80" "40"]]
                                                    [":padding" "|0 16px"]
                                                    [":display" "|inline-block"]
                                                    [":max-width" "|400px"]]]},
                           :procs []},
         "comp.graph" {:ns ["ns"
                            "stack-editor.comp.graph"
                            [":require"
                             ["[]" "hsl.core" ":refer" ["[]" "hsl"]]
                             ["[]" "respo.alias" ":refer" ["[]" "create-comp" "div"]]]],
                       :defs {"comp-graph" ["def"
                                            "comp-graph"
                                            ["create-comp" ":graph" ["fn" ["store"] ["fn" ["cursor"] ["div" ["{}"]]]]]]},
                       :procs []},
         "schema" {:ns ["ns" "stack-editor.schema"],
                   :defs {"store" ["def"
                                   "store"
                                   ["{}"
                                    [":router"
                                     ["{}" [":name" ":loading"] [":data" ":definitions"] [":show-palette?" "false"]]]
                                    [":collection" ["{}" [":package" "nil"] [":files" ["{}"]]]]
                                    [":writer" ["{}" [":stack" ["[]"]] [":pointer" "0"] [":clipboard" ["[]"]]]]
                                    [":notifications" ["[]"]]
                                    [":modal-stack" ["[]"]]
                                    [":states" ["{}"]]]]},
                   :procs []},
         "comp.container" {:ns ["ns"
                                "stack-editor.comp.container"
                                [":require"
                                 ["[]" "hsl.core" ":refer" ["[]" "hsl"]]
                                 ["[]" "respo.alias" ":refer" ["[]" "create-comp" "div" "span"]]
                                 ["[]" "respo.cursor" ":refer" ["[]" "with-cursor"]]
                                 ["[]" "respo.comp.text" ":refer" ["[]" "comp-text"]]
                                 ["[]" "respo.comp.debug" ":refer" ["[]" "comp-debug"]]
                                 ["[]" "respo-ui.style" ":as" "ui"]
                                 ["[]" "stack-editor.comp.loading" ":refer" ["[]" "comp-loading"]]
                                 ["[]" "stack-editor.comp.definitions" ":refer" ["[]" "comp-definitions"]]
                                 ["[]" "stack-editor.comp.workspace" ":refer" ["[]" "comp-workspace"]]
                                 ["[]" "stack-editor.comp.notifications" ":refer" ["[]" "comp-notifications"]]
                                 ["[]" "stack-editor.comp.palette" ":refer" ["[]" "comp-palette"]]
                                 ["[]" "stack-editor.comp.modal-stack" ":refer" ["[]" "comp-modal-stack"]]
                                 ["[]" "stack-editor.util.keycode" ":as" "keycode"]
                                 ["[]" "stack-editor.util.dom" ":as" "dom"]
                                 ["[]" "stack-editor.style.widget" ":as" "widget"]]],
                           :defs {"comp-container" ["def"
                                                    "comp-container"
                                                    ["create-comp"
                                                     ":container"
                                                     ["fn"
                                                      ["store"]
                                                      ["fn"
                                                       ["cursor"]
                                                       ["let"
                                                        [["router" [":router" "store"]] ["states" [":states" "store"]]]
                                                        ["div"
                                                         ["{}"
                                                          [":style"
                                                           ["merge"
                                                            "ui/global"
                                                            ["{}"
                                                             [":background-color" ["hsl" "0" "0" "0"]]
                                                             [":color" ["hsl" "0" "0" "70"]]]]]
                                                          [":attrs" ["{}" [":tab-index" "0"]]]
                                                          [":event" ["{}" [":keydown" "on-keydown"]]]]
                                                         ["case"
                                                          [":name" "router"]
                                                          [":loading" ["comp-loading"]]
                                                          [":analyzer"
                                                           ["comp-definitions" "states" [":collection" "store"]]]
                                                          [":workspace" ["comp-workspace" "store"]]
                                                          ["comp-text" "router" "nil"]]
                                                         ["comp-notifications" [":notifications" "store"]]
                                                         ["--"
                                                          "comp-debug"
                                                          [":stack" [":writer" "store"]]
                                                          ["{}" [":bottom" "0"]]]
                                                         ["if"
                                                          [":show-palette?" "router"]
                                                          ["with-cursor"
                                                           ":palette"
                                                           ["comp-palette"
                                                            [":palette" "states"]
                                                            [":files" [":collection" "store"]]]]]
                                                         ["comp-modal-stack" "states" [":modal-stack" "store"]]]]]]]],
                                  "on-keydown" ["defn" "on-keydown" ["e" "dispatch!"]]},
                           :procs []},
         "comp.modal-stack" {:ns ["ns"
                                  "stack-editor.comp.modal-stack"
                                  [":require"
                                   ["[]" "hsl.core" ":refer" ["[]" "hsl"]]
                                   ["[]" "respo.alias" ":refer" ["[]" "create-comp" "div" "span"]]
                                   ["[]" "respo.cursor" ":refer" ["[]" "with-cursor"]]
                                   ["[]" "respo.comp.text" ":refer" ["[]" "comp-text"]]
                                   ["[]" "respo.comp.debug" ":refer" ["[]" "comp-debug"]]
                                   ["[]" "respo-ui.style" ":as" "ui"]
                                   ["[]" "stack-editor.style.widget" ":as" "widget"]
                                   ["[]" "stack-editor.comp.rename-path" ":refer" ["[]" "comp-rename-path"]]
                                   ["[]" "stack-editor.comp.hydrate" ":refer" ["[]" "comp-hydrate"]]]],
                             :defs {"on-tip" ["defn" "on-tip" ["e" "dispatch!"]],
                                    "style-modal" ["def"
                                                   "style-modal"
                                                   ["merge"
                                                    "ui/center"
                                                    ["{}"
                                                     [":background-color" ["hsl" "0" "0" "0" "0.6"]]
                                                     [":z-index" "900"]
                                                     [":position" ":fixed"]
                                                     [":top" "0"]
                                                     [":right" "0"]
                                                     [":width" "|100%"]
                                                     [":height" "|100%"]]]],
                                    "on-recycle" ["defn"
                                                  "on-recycle"
                                                  ["e" "dispatch!"]
                                                  ["dispatch!" ":modal/recycle" "nil"]],
                                    "renderer" ["defn"
                                                "renderer"
                                                ["states" "kind" "title" "data"]
                                                ["div"
                                                 ["{}"]
                                                 ["case"
                                                  "title"
                                                  [":rename-path"
                                                   ["with-cursor"
                                                    ":rename-path"
                                                    ["comp-rename-path" [":rename-path" "states"] "data"]]]
                                                  [":hydrate"
                                                   ["with-cursor" ":hydrate" ["comp-hydrate" [":hydrate" "states"]]]]
                                                  ["comp-text" "title" "nil"]]]],
                                    "comp-modal-stack" ["def"
                                                        "comp-modal-stack"
                                                        ["create-comp"
                                                         ":modal-stack"
                                                         ["fn"
                                                          ["states" "modal-stack"]
                                                          ["fn"
                                                           ["cursor"]
                                                           ["div"
                                                            ["{}"]
                                                            ["->>"
                                                             "modal-stack"
                                                             ["map-indexed"
                                                              ["fn"
                                                               ["idx" "modal"]
                                                               ["let"
                                                                [["kind" [":kind" "modal"]]
                                                                 ["title" [":title" "modal"]]
                                                                 ["data" [":data" "modal"]]]
                                                                ["[]"
                                                                 "idx"
                                                                 ["div"
                                                                  ["{}"
                                                                   [":style" "style-modal"]
                                                                   [":event" ["{}" [":click" "on-recycle"]]]]
                                                                  ["div"
                                                                   ["{}" [":event" ["{}" [":click" "on-tip"]]]]
                                                                   ["renderer" "states" "kind" "title" "data"]]]]]]]]]]]]]},
                             :procs []},
         "comp.rename-path" {:ns ["ns"
                                  "stack-editor.comp.rename-path"
                                  [":require"
                                   ["[]" "respo.alias" ":refer" ["[]" "create-comp" "div" "input"]]
                                   ["[]" "respo.comp.text" ":refer" ["[]" "comp-text"]]
                                   ["[]" "respo.comp.space" ":refer" ["[]" "comp-space"]]
                                   ["[]" "respo-ui.style" ":as" "ui"]
                                   ["[]" "stack-editor.style.widget" ":as" "widget"]]],
                             :defs {"init-state" ["defn"
                                                  "init-state"
                                                  ["code-path"]
                                                  ["let"
                                                   [[["{}" ["ns-part" ":ns"] ["kind" ":kind"] ["extra-name" ":extra"]]
                                                     "code-path"]]
                                                   ["if"
                                                    ["=" "kind" ":defs"]
                                                    ["str" "ns-part" "|/" "extra-name"]
                                                    "ns-part"]]],
                                    "comp-rename-path" ["def"
                                                        "comp-rename-path"
                                                        ["create-comp"
                                                         ":rename-path"
                                                         ["fn"
                                                          ["states" "code-path"]
                                                          ["fn"
                                                           ["cursor"]
                                                           ["let"
                                                            [["state"
                                                              ["or" [":data" "states"] ["init-state" "code-path"]]]]
                                                            ["div"
                                                             ["{}"]
                                                             ["div"
                                                              ["{}"]
                                                              ["comp-text"
                                                               ["str" "|Rename in " ["first" "code-path"]]
                                                               "nil"]]
                                                             ["div" ["{}"] ["comp-text" ["last" "code-path"] "nil"]]
                                                             ["div"
                                                              ["{}"]
                                                              ["input"
                                                               ["{}"
                                                                [":style" ["merge" "ui/input" ["{}" [":width" "400"]]]]
                                                                [":attrs" ["{}" [":value" "state"]]]
                                                                [":event" ["{}" [":input" ["on-input" "cursor"]]]]]]
                                                              ["comp-space" "16" "nil"]
                                                              ["div"
                                                               ["{}"
                                                                [":style" "widget/button"]
                                                                [":attrs" ["{}" [":inner-text" "|Rename"]]]
                                                                [":event"
                                                                 ["{}" [":click" ["on-rename" "code-path" "state"]]]]]]]]]]]]],
                                    "on-input" ["defn"
                                                "on-input"
                                                ["cursor"]
                                                ["fn"
                                                 ["e" "dispatch!"]
                                                 ["dispatch!" ":states" ["[]" "cursor" [":value" "e"]]]]],
                                    "on-rename" ["defn"
                                                 "on-rename"
                                                 ["code-path" "text"]
                                                 ["fn"
                                                  ["e" "dispatch!"]
                                                  ["println" "|on-rename" "code-path" "text"]
                                                  ["dispatch!" ":collection/rename" ["[]" "code-path" "text"]]
                                                  ["dispatch!" ":modal/recycle" "nil"]]]},
                             :procs []},
         "comp.definitions" {:ns ["ns"
                                  "stack-editor.comp.definitions"
                                  [":require"
                                   ["[]" "hsl.core" ":refer" ["[]" "hsl"]]
                                   ["[]" "clojure.string" ":as" "string"]
                                   ["[]" "respo.alias" ":refer" ["[]" "create-comp" "div" "input"]]
                                   ["[]" "respo.cursor" ":refer" ["[]" "with-cursor"]]
                                   ["[]" "respo.comp.space" ":refer" ["[]" "comp-space"]]
                                   ["[]" "respo.comp.text" ":refer" ["[]" "comp-text"]]
                                   ["[]" "respo.comp.debug" ":refer" ["[]" "comp-debug"]]
                                   ["[]" "respo-ui.style" ":as" "ui"]
                                   ["[]" "respo-border.transform.space" ":refer" ["[]" "interpose-spaces"]]
                                   ["[]" "stack-editor.style.widget" ":as" "widget"]
                                   ["[]" "stack-editor.comp.ns-creator" ":refer" ["[]" "comp-ns-creator"]]
                                   ["[]" "stack-editor.comp.file" ":refer" ["[]" "comp-file"]]]],
                             :defs {"by-ns-part" ["defn"
                                                  "by-ns-part"
                                                  ["entry"]
                                                  ["let"
                                                   [["path" ["first" "entry"]]
                                                    ["ns-name" ["first" ["string/split" "path" ["re-pattern" "|/"]]]]]
                                                   "ns-name"]],
                                    "comp-definitions" ["def"
                                                        "comp-definitions"
                                                        ["create-comp"
                                                         ":definitions"
                                                         ["fn"
                                                          ["states" "sepal-data"]
                                                          ["fn"
                                                           ["cursor"]
                                                           ["let"
                                                            [["files" [":files" "sepal-data"]]]
                                                            ["div"
                                                             ["{}"
                                                              [":style"
                                                               ["merge"
                                                                "ui/fullscreen"
                                                                "ui/column"
                                                                "ui/card"
                                                                ["{}" [":background-color" ":black"]]]]]
                                                             ["comp-space" "nil" "|16px"]
                                                             ["with-cursor"
                                                              ":ns-creator"
                                                              ["comp-ns-creator"
                                                               [":ns-creator" "states"]
                                                               [":package" "sepal-data"]]]
                                                             ["comp-space" "nil" "|32px"]
                                                             ["div"
                                                              ["{}"
                                                               [":style"
                                                                ["merge"
                                                                 "ui/flex"
                                                                 ["{}" [":overflow" "|auto"] [":padding-bottom" "200"]]]]]
                                                              ["->>"
                                                               "files"
                                                               ["sort-by" "first"]
                                                               ["map"
                                                                ["fn"
                                                                 ["entry"]
                                                                 ["let"
                                                                  [["ns-name" ["first" "entry"]]
                                                                   ["def-codes" [":defs" ["val" "entry"]]]]
                                                                  ["[]"
                                                                   "ns-name"
                                                                   ["with-cursor"
                                                                    "ns-name"
                                                                    ["comp-file"
                                                                     ["get" "states" "ns-name"]
                                                                     "def-codes"
                                                                     "ns-name"]]]]]]]]]]]]]]},
                             :procs []},
         "util.dom" {:ns ["ns" "stack-editor.util.dom"],
                     :defs {"focus-palette!" ["defn"
                                              "focus-palette!"
                                              []
                                              ["js/requestAnimationFrame"
                                               ["fn"
                                                []
                                                ["let"
                                                 [["target" [".querySelector" "js/document" "|#command-palette"]]]
                                                 ["if" ["some?" "target"] [".focus" "target"]]]]]]},
                     :procs []},
         "main" {:ns ["ns"
                      "stack-editor.main"
                      [":require"
                       ["[]" "respo.core" ":refer" ["[]" "render!" "clear-cache!" "render-element" "falsify-stage!"]]
                       ["[]" "stack-editor.schema" ":as" "schema"]
                       ["[]" "stack-editor.comp.container" ":refer" ["[]" "comp-container"]]
                       ["[]" "cljs.reader" ":refer" ["[]" "read-string"]]
                       ["[]" "stack-editor.updater.core" ":refer" ["[]" "updater"]]
                       ["[]" "stack-editor.util.keycode" ":as" "keycode"]
                       ["[]" "stack-editor.util.dom" ":as" "dom"]
                       ["[]" "stack-editor.util" ":refer" ["[]" "now!"]]
                       ["[]"
                        "stack-editor.actions"
                        ":refer"
                        ["[]" "load-collection!" "submit-collection!" "submit-changes!" "display-code!"]]
                       ["[]" "cirru-editor.util.dom" ":refer" ["[]" "focus!"]]]],
                 :defs {"dispatch!" ["defn"
                                     "dispatch!"
                                     ["op" "op-data"]
                                     ["--" "println" "|Dispatch!" "op" "op-data"]
                                     ["case"
                                      "op"
                                      [":effect/submit"
                                       ["let"
                                        [["shift?" "op-data"] ["sepal-data" [":collection" "@store-ref"]]]
                                        ["if"
                                         "shift?"
                                         ["submit-collection!" "sepal-data" "dispatch!"]
                                         ["submit-changes!" "sepal-data" "dispatch!"]]]]
                                      [":effect/dehydrate" ["display-code!" "@store-ref"]]
                                      [":effect/load" ["load-collection!" "dispatch!" "false"]]
                                      ["let"
                                       [["new-store" ["updater" "@store-ref" "op" "op-data" ["now!"]]]]
                                       ["reset!"
                                        "focus-moved?-ref"
                                        ["not"
                                         ["and"
                                          ["identical?" [":collection" "@store-ref"] [":collection" "new-store"]]
                                          ["identical?" [":writer" "@store-ref"] [":writer" "new-store"]]]]]
                                       ["reset!" "store-ref" "new-store"]]]],
                        "-main!" ["defn"
                                  "-main!"
                                  []
                                  ["enable-console-print!"]
                                  ["if"
                                   ["not" ["empty?" "ssr-stages"]]
                                   ["let"
                                    [["target" [".querySelector" "js/document" "|#app"]]]
                                    ["falsify-stage!"
                                     "target"
                                     ["render-element" ["comp-container" "@store-ref" "ssr-stages"]]
                                     "dispatch!"]]]
                                  ["render-app!"]
                                  ["add-watch" "store-ref" ":changes" "render-app!"]
                                  [".addEventListener"
                                   "js/window"
                                   "|keydown"
                                   ["fn"
                                    ["event"]
                                    ["let"
                                     [["code" [".-keyCode" "event"]]
                                      ["command?" ["or" [".-metaKey" "event"] [".-ctrlKey" "event"]]]
                                      ["shift?" [".-shiftKey" "event"]]]
                                     ["cond"
                                      [["and" "command?" ["=" "code" "keycode/key-p"]]
                                       ["do"
                                        [".preventDefault" "event"]
                                        [".stopPropagation" "event"]
                                        ["dispatch!" ":router/toggle-palette" "nil"]
                                        ["dom/focus-palette!"]]]
                                      [["and" "shift?" "command?" ["=" "code" "keycode/key-a"]]
                                       ["do"
                                        ["let"
                                         [["router" [":router" "@store-ref"]] ["writer" [":writer" "@store-ref"]]]
                                         ["if"
                                          ["=" [":name" "router"] ":workspace"]
                                          ["dispatch!"
                                           ":router/route"
                                           ["{}" [":name" ":analyzer"] [":data" ":definitions"]]]
                                          ["if"
                                           ["not" ["empty?" [":stack" "writer"]]]
                                           ["dispatch!" ":router/route" ["{}" [":name" ":workspace"] [":data" "nil"]]]]]]]]
                                      [":else" "nil"]]]]]
                                  ["println" "|app started!"]
                                  ["load-collection!" "dispatch!" "true"]],
                        "on-jsload!" ["defn"
                                      "on-jsload!"
                                      []
                                      ["clear-cache!"]
                                      ["render-app!"]
                                      ["println" "|Code updated."]],
                        "render-app!" ["defn"
                                       "render-app!"
                                       []
                                       ["let"
                                        [["target" [".querySelector" "js/document" "|#app"]]]
                                        ["render!"
                                         ["comp-container" "@store-ref" ["#{}" ":shell" ":dynamic"]]
                                         "target"
                                         "dispatch!"]
                                        ["if"
                                         "@focus-moved?-ref"
                                         ["do" ["reset!" "focus-moved?-ref" "false"] ["focus!"]]]]],
                        "ssr-stages" ["def"
                                      "ssr-stages"
                                      ["let"
                                       [["ssr-element" [".querySelector" "js/document" "|#ssr-stages"]]
                                        ["ssr-markup" [".getAttribute" "ssr-element" "|content"]]]
                                       ["read-string" "ssr-markup"]]],
                        "store-ref" ["defonce" "store-ref" ["atom" "schema/store"]],
                        "states-ref" ["defonce" "states-ref" ["atom" ["{}"]]],
                        "focus-moved?-ref" ["def" "focus-moved?-ref" ["atom" "false"]]},
                 :procs [["set!" "js/window.onload" "-main!"]]},
         "updater.notification" {:ns ["ns" "stack-editor.updater.notification"],
                                 :defs {"add-one" ["defn"
                                                   "add-one"
                                                   ["store" "op-data" "op-id"]
                                                   ["let"
                                                    [["notification" "op-data"]]
                                                    ["->"
                                                     "store"
                                                     ["update"
                                                      ":notifications"
                                                      ["fn"
                                                       ["notifications"]
                                                       ["into"
                                                        ["[]"]
                                                        ["cons"
                                                         ["[]" "op-id" "notification"]
                                                         ["take" "3" "notifications"]]]]]]]],
                                        "remove-since" ["defn"
                                                        "remove-since"
                                                        ["store" "op-data"]
                                                        ["let"
                                                         [["pos" "op-data"]]
                                                         ["->"
                                                          "store"
                                                          ["update"
                                                           ":notifications"
                                                           ["fn" ["notifications"] ["take" "pos" "notifications"]]]]]],
                                        "remove-one" ["defn"
                                                      "remove-one"
                                                      ["store" "op-data"]
                                                      ["let"
                                                       [["notification-id" "op-data"]]
                                                       ["->"
                                                        "store"
                                                        ["update"
                                                         ":notifications"
                                                         ["fn"
                                                          ["notifications"]
                                                          ["filterv"
                                                           ["fn"
                                                            ["notification"]
                                                            ["not=" "notification-id" ["first" "notification"]]]
                                                           "notifications"]]]]]]},
                                 :procs []},
         "comp.define" {:ns ["ns"
                             "stack-editor.comp.define"
                             [":require"
                              ["[]" "hsl.core" ":refer" ["[]" "hsl"]]
                              ["[]" "respo.alias" ":refer" ["[]" "create-comp" "div" "input"]]
                              ["[]" "respo.comp.text" ":refer" ["[]" "comp-text"]]
                              ["[]" "respo.comp.space" ":refer" ["[]" "comp-space"]]
                              ["[]" "respo.comp.debug" ":refer" ["[]" "comp-debug"]]
                              ["[]" "respo-ui.style" ":as" "ui"]
                              ["[]" "stack-editor.style.widget" ":as" "widget"]
                              ["[]" "stack-editor.util.keycode" ":as" "keycode"]]],
                        :defs {"on-input" ["defn"
                                           "on-input"
                                           ["parent-cursor"]
                                           ["fn"
                                            ["e" "dispatch!"]
                                            ["dispatch!" ":states" ["[]" "parent-cursor" [":value" "e"]]]]],
                               "update-state" ["defn" "update-state" ["state" "text"] "text"],
                               "style-namespace" ["def"
                                                  "style-namespace"
                                                  ["{}" [":display" "|inline-block"] [":cursor" "|pointer"]]],
                               "on-click" ["defn"
                                           "on-click"
                                           ["ns-text"]
                                           ["fn"
                                            ["e" "dispatch!"]
                                            ["dispatch!"
                                             ":collection/edit"
                                             ["{}" [":ns" "ns-text"] [":kind" ":ns"] [":extra" "nil"] [":focus" ["[]"]]]]]],
                               "on-proc" ["defn"
                                          "on-proc"
                                          ["ns-name"]
                                          ["fn"
                                           ["e" "dispatch!"]
                                           ["dispatch!"
                                            ":collection/edit"
                                            ["{}"
                                             [":ns" "ns-name"]
                                             [":kind" ":procs"]
                                             [":extra" "nil"]
                                             [":focus" ["[]"]]]]]],
                               "style-ns" ["def"
                                           "style-ns"
                                           ["{}"
                                            [":font-family" "|Source Code Pro,Menlo,monospace"]
                                            [":white-space" ":nowrap"]]],
                               "comp-define" ["def"
                                              "comp-define"
                                              ["create-comp"
                                               ":define"
                                               ["fn"
                                                ["draft" "ns-name" "parent-cursor"]
                                                ["fn"
                                                 ["cursor"]
                                                 ["div"
                                                  ["{}"]
                                                  ["div"
                                                   ["{}"
                                                    [":style" "style-namespace"]
                                                    [":event" ["{}" [":click" ["on-click" "ns-name"]]]]]
                                                   ["comp-text" "ns-name" "style-ns"]
                                                   ["comp-space" "16" "nil"]
                                                   ["div"
                                                    ["{}"
                                                     [":style" ["merge" "style-proc"]]
                                                     [":event" ["{}" [":click" ["on-proc" "ns-name"]]]]]
                                                    ["comp-text" "|proc" "nil"]]]
                                                  ["div"
                                                   ["{}"]
                                                   ["input"
                                                    ["{}"
                                                     [":style"
                                                      ["merge"
                                                       ["merge"
                                                        "widget/input"
                                                        ["{}" [":width" "|200px"] [":height" "|24px"]]]]]
                                                     [":attrs" ["{}" [":value" "draft"] [":placeholder" "|"]]]
                                                     [":event"
                                                      ["{}"
                                                       [":input" ["on-input" "parent-cursor"]]
                                                       [":keydown" ["on-keydown" "parent-cursor" "draft" "ns-name"]]]]]]]]]]]],
                               "init-state" ["defn" "init-state" ["&" "args"] "|"],
                               "style-proc" ["def"
                                             "style-proc"
                                             ["{}"
                                              [":width" "48"]
                                              [":min-width" "48"]
                                              [":height" "24"]
                                              [":line-height" "|24px"]
                                              [":cursor" ":pointer"]
                                              [":display" ":inline-block"]
                                              [":text-decoration" ":underline"]]],
                               "on-keydown" ["defn"
                                             "on-keydown"
                                             ["parent-cursor" "text" "ns-name"]
                                             ["fn"
                                              ["e" "dispatch!"]
                                              ["if"
                                               ["and"
                                                ["=" "keycode/key-enter" [":key-code" "e"]]
                                                ["pos?" ["count" "text"]]]
                                               ["do"
                                                ["dispatch!" ":states" ["[]" "parent-cursor" "|"]]
                                                ["dispatch!" ":collection/add-definition" ["[]" "ns-name" "text"]]]]]]},
                        :procs []},
         "comp.palette" {:ns ["ns"
                              "stack-editor.comp.palette"
                              [":require"
                               ["[]" "clojure.string" ":as" "string"]
                               ["[]" "hsl.core" ":refer" ["[]" "hsl"]]
                               ["[]" "respo.alias" ":refer" ["[]" "create-comp" "div" "input"]]
                               ["[]" "respo-ui.style" ":as" "ui"]
                               ["[]" "respo.comp.text" ":refer" ["[]" "comp-text"]]
                               ["[]" "cirru-editor.util.dom" ":refer" ["[]" "focus!"]]
                               ["[]" "stack-editor.comp.command" ":refer" ["[]" "comp-command"]]
                               ["[]" "stack-editor.util.keycode" ":as" "keycode"]
                               ["[]" "stack-editor.style.widget" ":as" "widget"]
                               ["[]" "stack-editor.util.detect" ":refer" ["[]" "fuzzy-search"]]]],
                         :defs {"on-input" ["defn"
                                            "on-input"
                                            ["cursor" "state"]
                                            ["fn"
                                             ["e" "dispatch!"]
                                             ["dispatch!"
                                              ":states"
                                              ["[]"
                                               "cursor"
                                               ["merge" "state" ["{}" [":text" [":value" "e"]] [":cursor" "0"]]]]]]],
                                "handle-command" ["defn"
                                                  "handle-command"
                                                  ["cursor" "commands" "files" "dispatch!"]
                                                  ["let"
                                                   [["command" ["get" ["into" ["[]"] "commands"] "cursor"]]]
                                                   ["println" "|Command" ["pr-str" "command"]]
                                                   ["dispatch!" ":router/toggle-palette" "nil"]
                                                   ["case"
                                                    ["first" "command"]
                                                    [":load" ["dispatch!" ":effect/load" "nil"]]
                                                    [":patch" ["dispatch!" ":effect/submit" "true"]]
                                                    [":dehydrate" ["dispatch!" ":effect/dehydrate" "nil"]]
                                                    [":hydrate"
                                                     ["dispatch!"
                                                      ":modal/mould"
                                                      ["{}" [":title" ":hydrate"] [":data" "nil"]]]]
                                                    [":defs"
                                                     ["do"
                                                      ["dispatch!"
                                                       ":collection/edit"
                                                       ["{}"
                                                        [":ns" ["get" "command" "1"]]
                                                        [":kind" ":defs"]
                                                        [":extra" ["last" "command"]]
                                                        [":focus" ["[]"]]]]]]
                                                    [":ns"
                                                     ["do"
                                                      ["dispatch!"
                                                       ":collection/edit"
                                                       ["{}"
                                                        [":ns" ["get" "command" "1"]]
                                                        [":kind" ":ns"]
                                                        [":extra" "nil"]
                                                        [":focus" ["[]"]]]]]]
                                                    [":procs"
                                                     ["do"
                                                      ["dispatch!"
                                                       ":collection/edit"
                                                       ["{}"
                                                        [":ns" ["get" "command" "1"]]
                                                        [":kind" ":procs"]
                                                        [":extra" "nil"]
                                                        [":focus" ["[]"]]]]]]
                                                    "nil"]]],
                                "comp-palette" ["def"
                                                "comp-palette"
                                                ["create-comp"
                                                 ":palette"
                                                 ["fn"
                                                  ["states" "files"]
                                                  ["fn"
                                                   ["cursor"]
                                                   ["let"
                                                    [["ns-names"
                                                      ["->>"
                                                       ["keys" "files"]
                                                       ["map" ["fn" ["path"] ["[]" ":ns" "path"]]]]]
                                                     ["state" ["or" [":data" "states"] "initial-state"]]
                                                     ["def-paths"
                                                      ["->>"
                                                       "files"
                                                       ["map"
                                                        ["fn"
                                                         ["entry"]
                                                         ["let"
                                                          [[["[]" "ns-part" "tree"] "entry"]]
                                                          ["->>"
                                                           [":defs" "tree"]
                                                           ["keys"]
                                                           ["map"
                                                            ["fn" ["def-name"] ["[]" ":defs" "ns-part" "def-name"]]]]]]]
                                                       ["apply" "concat"]]]
                                                     ["procedure-names"
                                                      ["->>"
                                                       ["keys" "files"]
                                                       ["map" ["fn" ["proc-name"] ["[]" ":procs" "proc-name"]]]]]
                                                     ["queries" ["string/split" [":text" "state"] "| "]]
                                                     ["commands"
                                                      ["->>"
                                                       ["concat"
                                                        "def-paths"
                                                        "ns-names"
                                                        "procedure-names"
                                                        "basic-commands"]
                                                       ["filter"
                                                        ["fn" ["command"] ["fuzzy-search" "command" "queries"]]]]]]
                                                    ["div"
                                                     ["{}"
                                                      [":style" ["merge" "ui/fullscreen" "ui/row" "style-container"]]]
                                                     ["div"
                                                      ["{}"
                                                       [":style"
                                                        ["merge"
                                                         "ui/column"
                                                         ["{}"
                                                          [":background-color" ["hsl" "0" "0" "0" "0.8"]]
                                                          [":width" "|800px"]]]]]
                                                      ["input"
                                                       ["{}"
                                                        [":style"
                                                         ["merge"
                                                          "widget/input"
                                                          ["{}" [":width" "|100%"] [":line-height" "|40px"]]]]
                                                        [":attrs"
                                                         ["{}"
                                                          [":placeholder" "|write command..."]
                                                          [":id" "|command-palette"]
                                                          [":value" [":text" "state"]]]]
                                                        [":event"
                                                         ["{}"
                                                          [":input" ["on-input" "cursor" "state"]]
                                                          [":keydown"
                                                           ["on-keydown"
                                                            "cursor"
                                                            "state"
                                                            "commands"
                                                            [":cursor" "state"]
                                                            "files"]]]]]]
                                                      ["div"
                                                       ["{}"
                                                        [":style" ["merge" "ui/flex" ["{}" [":overflow" "|auto"]]]]]
                                                       ["->>"
                                                        "commands"
                                                        ["map-indexed"
                                                         ["fn"
                                                          ["idx" "command"]
                                                          ["[]"
                                                           "idx"
                                                           ["comp-command"
                                                            "command"
                                                            ["=" "idx" [":cursor" "state"]]
                                                            ["on-select" "idx" "commands" "files"]]]]]]]]]]]]]],
                                "style-container" ["def"
                                                   "style-container"
                                                   ["{}"
                                                    [":position" "|fixed"]
                                                    [":background-color" ["hsl" "200" "40" "10" "0.8"]]
                                                    [":justify-content" "|center"]]],
                                "on-select" ["defn"
                                             "on-select"
                                             ["cursor" "commands" "files"]
                                             ["fn"
                                              ["dispatch!"]
                                              ["handle-command" "cursor" "commands" "files" "dispatch!"]]],
                                "initial-state" ["def" "initial-state" ["{}" [":text" "|"] [":cursor" "0"]]],
                                "basic-commands" ["def"
                                                  "basic-commands"
                                                  ["[]"
                                                   ["[]" ":save"]
                                                   ["[]" ":load"]
                                                   ["[]" ":hydrate"]
                                                   ["[]" ":dehydrate"]]],
                                "on-keydown" ["defn"
                                              "on-keydown"
                                              ["respo-cursor" "state" "commands" "cursor" "collection"]
                                              ["fn"
                                               ["e" "dispatch!"]
                                               ["let"
                                                [["code" [":key-code" "e"]] ["total" ["count" "commands"]]]
                                                ["cond"
                                                 [["=" "code" "keycode/key-esc"]
                                                  ["do"
                                                   ["dispatch!"
                                                    ":states"
                                                    ["[]" "respo-cursor" ["merge" "state" ["{}" [":text" "|"]]]]]
                                                   ["dispatch!" ":router/toggle-palette" "nil"]
                                                   ["focus!"]]]
                                                 [["=" "code" "keycode/key-down"]
                                                  ["if"
                                                   ["<" "cursor" ["dec" "total"]]
                                                   ["dispatch!"
                                                    ":states"
                                                    ["[]"
                                                     "respo-cursor"
                                                     ["merge" "state" ["{}" [":cursor" ["inc" "cursor"]]]]]]]]
                                                 [["=" "code" "keycode/key-up"]
                                                  ["if"
                                                   [">" "cursor" "0"]
                                                   ["dispatch!"
                                                    ":states"
                                                    ["[]"
                                                     "respo-cursor"
                                                     ["merge" "state" ["{}" [":cursor" ["dec" "cursor"]]]]]]]]
                                                 [["=" "code" "keycode/key-enter"]
                                                  ["do"
                                                   ["dispatch!"
                                                    ":states"
                                                    ["[]" "respo-cursor" ["merge" "state" ["{}" [":text" "|"]]]]]
                                                   ["handle-command" "cursor" "commands" "collection" "dispatch!"]]]
                                                 [":else" "nil"]]]]]},
                         :procs []},
         "comp.ns-creator" {:ns ["ns"
                                 "stack-editor.comp.ns-creator"
                                 [":require"
                                  ["[]" "clojure.string" ":as" "string"]
                                  ["[]" "respo.alias" ":refer" ["[]" "create-comp" "div" "input"]]
                                  ["[]" "hsl.core" ":refer" ["[]" "hsl"]]
                                  ["[]" "respo.comp.text" ":refer" ["[]" "comp-text"]]
                                  ["[]" "respo.comp.space" ":refer" ["[]" "comp-space"]]
                                  ["[]" "stack-editor.style.widget" ":as" "widget"]]],
                            :defs {"on-click" ["defn"
                                               "on-click"
                                               ["cursor" "state"]
                                               ["fn"
                                                ["e" "dispatch!"]
                                                ["if"
                                                 ["not" ["string/blank?" "state"]]
                                                 ["do"
                                                  ["dispatch!" ":collection/add-namespace" "state"]
                                                  ["dispatch!" ":states" ["[]" "cursor" "|"]]]]]],
                                   "on-input" ["defn"
                                               "on-input"
                                               ["cursor"]
                                               ["fn"
                                                ["e" "dispatch!"]
                                                ["dispatch!" ":states" ["[]" "cursor" [":value" "e"]]]]],
                                   "comp-ns-creator" ["def"
                                                      "comp-ns-creator"
                                                      ["create-comp"
                                                       ":ns-creator"
                                                       ["fn"
                                                        ["states" "pkg"]
                                                        ["fn"
                                                         ["cursor"]
                                                         ["let"
                                                          [["state" ["or" [":data" "states"] "|"]]]
                                                          ["div"
                                                           ["{}"]
                                                           ["input"
                                                            ["{}"
                                                             [":style" "widget/input"]
                                                             [":event"
                                                              ["{}"
                                                               [":input" ["on-input" "cursor"]]
                                                               [":keydown" ["on-keydown" "cursor" "state"]]]]
                                                             [":attrs"
                                                              ["{}"
                                                               [":value" "state"]
                                                               [":placeholder" ["str" "pkg" "|."]]]]]]
                                                           ["comp-space" "|8px" "nil"]
                                                           ["div"
                                                            ["{}"
                                                             [":style" "widget/button"]
                                                             [":event" ["{}" [":click" ["on-click" "cursor" "state"]]]]]
                                                            ["comp-text" "|add" "nil"]]]]]]]],
                                   "on-keydown" ["defn"
                                                 "on-keydown"
                                                 ["cursor" "state"]
                                                 ["fn"
                                                  ["e" "dispatch!"]
                                                  ["if"
                                                   ["and"
                                                    ["=" "13" [":key-code" "e"]]
                                                    ["not" ["string/blank?" "state"]]]
                                                   ["do"
                                                    ["dispatch!" ":collection/add-namespace" "state"]
                                                    ["dispatch!" ":states" ["[]" "cursor" "|"]]]]]]},
                            :procs []},
         "updater.core" {:ns ["ns"
                              "stack-editor.updater.core"
                              [":require"
                               ["[]" "respo.cursor" ":refer" ["[]" "mutate"]]
                               ["[]" "stack-editor.updater.router" ":as" "router"]
                               ["[]" "stack-editor.updater.collection" ":as" "collection"]
                               ["[]" "stack-editor.updater.notification" ":as" "notification"]
                               ["[]" "stack-editor.updater.stack" ":as" "stack"]
                               ["[]" "stack-editor.updater.modal" ":as" "modal"]]],
                         :defs {"updater" ["defn"
                                           "updater"
                                           ["store" "op" "op-data" "op-id"]
                                           ["let"
                                            [["handler"
                                              ["case"
                                               "op"
                                               [":states" ["fn" ["x"] ["update" "x" ":states" ["mutate" "op-data"]]]]
                                               [":router/route" "router/route"]
                                               [":router/toggle-palette" "router/toggle-palette"]
                                               [":collection/add-definition" "collection/add-definition"]
                                               [":collection/add-namespace" "collection/add-namespace"]
                                               [":collection/edit" "collection/edit"]
                                               [":collection/edit-ns" "collection/edit-ns"]
                                               [":collection/expand-ns" "collection/expand-ns"]
                                               [":collection/write" "collection/write-code"]
                                               [":collection/load" "collection/load-remote"]
                                               [":collection/remove-this" "collection/remove-this"]
                                               [":collection/rename" "collection/rename"]
                                               [":collection/hydrate" "collection/hydrate"]
                                               [":notification/add-one" "notification/add-one"]
                                               [":notification/remove-one" "notification/remove-one"]
                                               [":notification/remove-since" "notification/remove-since"]
                                               [":stack/goto-definition" "stack/goto-definition"]
                                               [":stack/dependents" "stack/dependents"]
                                               [":stack/go-back" "stack/go-back"]
                                               [":stack/go-next" "stack/go-next"]
                                               [":stack/point-to" "stack/point-to"]
                                               [":stack/collapse" "stack/collapse"]
                                               [":stack/shift" "stack/shift-one"]
                                               [":modal/mould" "modal/mould"]
                                               [":modal/recycle" "modal/recycle"]
                                               "default-handler"]]]
                                            ["handler" "store" "op-data" "op-id"]]],
                                "default-handler" ["defn" "default-handler" ["store" "op-data"] "store"]},
                         :procs []},
         "comp.stack" {:ns ["ns"
                            "stack-editor.comp.stack"
                            [":require"
                             ["[]" "hsl.core" ":refer" ["[]" "hsl"]]
                             ["[]" "clojure.string" ":as" "string"]
                             ["[]" "respo-ui.style" ":as" "ui"]
                             ["[]" "respo.alias" ":refer" ["[]" "create-comp" "div"]]
                             ["[]" "respo.comp.text" ":refer" ["[]" "comp-text"]]
                             ["[]" "respo.comp.space" ":refer" ["[]" "comp-space"]]
                             ["[]" "respo.comp.debug" ":refer" ["[]" "comp-debug"]]]],
                       :defs {"style-ns" ["def"
                                          "style-ns"
                                          ["{}"
                                           [":font-size" "|11px"]
                                           [":line-height" "1.4"]
                                           [":color" ["hsl" "0" "0" "50"]]
                                           [":font-family" "|Hind"]]],
                              "style-bright" ["def" "style-bright" ["{}" [":color" ["hsl" "0" "0" "90"]]]],
                              "style-ns-main" ["def"
                                               "style-ns-main"
                                               ["{}"
                                                [":padding" "|0 8px"]
                                                [":line-height" "|36px"]
                                                [":cursor" "|pointer"]
                                                [":color" ["hsl" "0" "0" "60"]]
                                                [":font-family" "|Hind"]
                                                [":font-size" "|13px"]
                                                [":white-space" "|nowrap"]]],
                              "on-click" ["defn"
                                          "on-click"
                                          ["pointer"]
                                          ["fn"
                                           ["e" "dispatch!"]
                                           ["let"
                                            [["event" [":original-event" "e"]]
                                             ["command?" ["or" [".-ctrlKey" "event"] [".-metaKey" "event"]]]
                                             ["shift?" [".-shiftKey" "event"]]]
                                            ["cond"
                                             ["command?" ["dispatch!" ":stack/collapse" "pointer"]]
                                             ["shift?"
                                              ["do" [".preventDefault" "event"] ["dispatch!" ":stack/shift" "pointer"]]]
                                             [":else" ["do" ["dispatch!" ":stack/point-to" "pointer"]]]]]]],
                              "style-container" ["def"
                                                 "style-container"
                                                 ["{}"
                                                  [":overflow" "|auto"]
                                                  [":padding" "|16px 0 160px 0"]
                                                  [":user-select" ":nonworkspacee"]]],
                              "style-bar" ["def"
                                           "style-bar"
                                           ["{}"
                                            [":padding" "|4px 8px"]
                                            [":cursor" "|pointer"]
                                            [":color" ["hsl" "0" "0" "60"]]
                                            [":font-family" "|Source Code Pro,Menlo,monospace"]
                                            [":font-size" "13"]
                                            [":line-height" "1.4"]
                                            [":white-space" "|nowrap"]]],
                              "comp-stack" ["def"
                                            "comp-stack"
                                            ["create-comp"
                                             ":stack"
                                             ["fn"
                                              ["stack" "pointer"]
                                              ["fn"
                                               ["cursor"]
                                               ["div"
                                                ["{}" [":style" ["merge" "ui/flex" "style-container"]]]
                                                ["->>"
                                                 "stack"
                                                 ["map-indexed"
                                                  ["fn"
                                                   ["idx" "item"]
                                                   ["[]"
                                                    "idx"
                                                    ["let"
                                                     [[["{}" ["ns-part" ":ns"] ["kind" ":kind"] ["extra-name" ":extra"]]
                                                       "item"]]
                                                     ["if"
                                                      ["=" "kind" ":defs"]
                                                      ["div"
                                                       ["{}"
                                                        [":style" "style-bar"]
                                                        [":event" ["{}" [":click" ["on-click" "idx"]]]]]
                                                       ["div"
                                                        ["{}" [":style" ["if" ["=" "idx" "pointer"] "style-bright"]]]
                                                        ["comp-text" "extra-name" "nil"]]
                                                       ["div"
                                                        ["{}" [":style" "style-ns"]]
                                                        ["comp-text" "ns-part" "nil"]]]
                                                      ["div"
                                                       ["{}"
                                                        [":style"
                                                         ["merge"
                                                          "style-ns-main"
                                                          ["if" ["=" "idx" "pointer"] "style-bright"]]]
                                                        [":event" ["{}" [":click" ["on-click" "idx"]]]]]
                                                       ["comp-text" "ns-part" "nil"]]]]]]]]]]]]]},
                       :procs []},
         "comp.notifications" {:ns ["ns"
                                    "stack-editor.comp.notifications"
                                    [":require"
                                     ["[]" "hsl.core" ":refer" ["[]" "hsl"]]
                                     ["[]" "respo-ui.style" ":as" "ui"]
                                     ["[]" "respo.alias" ":refer" ["[]" "create-comp" "div"]]
                                     ["[]" "respo.comp.text" ":refer" ["[]" "comp-text"]]]],
                               :defs {"comp-notifications" ["def"
                                                            "comp-notifications"
                                                            ["create-comp"
                                                             ":notifications"
                                                             ["fn"
                                                              ["notifications"]
                                                              ["fn"
                                                               ["cursor"]
                                                               ["div"
                                                                ["{}"]
                                                                ["->>"
                                                                 "notifications"
                                                                 ["map-indexed"
                                                                  ["fn"
                                                                   ["idx" "entry"]
                                                                   ["[]"
                                                                    ["first" "entry"]
                                                                    ["div"
                                                                     ["{}"
                                                                      [":style"
                                                                       ["merge"
                                                                        "style-notification"
                                                                        ["{}"
                                                                         [":top"
                                                                          ["str" ["+" "8" ["*" "40" "idx"]] "|px"]]]]]
                                                                      [":event" ["{}" [":click" ["on-click" "idx"]]]]]
                                                                     ["comp-text" ["last" "entry"] "nil"]]]]]]]]]]],
                                      "on-click" ["defn"
                                                  "on-click"
                                                  ["idx"]
                                                  ["fn"
                                                   ["e" "dispatch!"]
                                                   ["dispatch!" ":notification/remove-since" "idx"]]],
                                      "style-notification" ["def"
                                                            "style-notification"
                                                            ["{}"
                                                             [":position" "|fixed"]
                                                             [":top" "|8px"]
                                                             [":right" "|8px"]
                                                             [":transition" "|320ms"]
                                                             [":line-height" "|32px"]
                                                             [":white-space" "|nowrap"]
                                                             [":color" ["hsl" "0" "0" "100"]]
                                                             [":background-color" ["hsl" "300" "30" "70" "0.3"]]
                                                             [":z-index" "999"]
                                                             [":min-width" "|160px"]
                                                             [":padding" "|0 16px"]
                                                             [":cursor" "|pointer"]
                                                             [":border-radius" "|2px"]]]},
                               :procs []},
         "comp.file" {:ns ["ns"
                           "stack-editor.comp.file"
                           [":require"
                            ["[]" "clojure.string" ":as" "string"]
                            ["[]" "respo.alias" ":refer" ["[]" "create-comp" "div" "input"]]
                            ["[]" "respo.cursor" ":refer" ["[]" "with-cursor"]]
                            ["[]" "respo.comp.text" ":refer" ["[]" "comp-text"]]
                            ["[]" "respo.comp.space" ":refer" ["[]" "comp-space"]]
                            ["[]" "respo.comp.debug" ":refer" ["[]" "comp-debug"]]
                            ["[]" "respo-ui.style" ":as" "ui"]
                            ["[]" "stack-editor.style.widget" ":as" "widget"]
                            ["[]" "stack-editor.comp.define" ":refer" ["[]" "comp-define"]]
                            ["[]" "cirru-editor.util.dom" ":refer" ["[]" "focus!"]]]],
                      :defs {"comp-file" ["def"
                                          "comp-file"
                                          ["create-comp"
                                           ":file"
                                           ["fn"
                                            ["states" "def-codes" "ns-name"]
                                            ["fn"
                                             ["cursor"]
                                             ["let"
                                              [["state" ["or" [":data" "states"] "|"]]]
                                              ["div"
                                               ["{}" [":style" "style-file"]]
                                               ["comp-define" "state" "ns-name" "cursor"]
                                               ["div"
                                                ["{}" [":style" "style-list"]]
                                                ["->>"
                                                 "def-codes"
                                                 ["filter" ["with-query" "state"]]
                                                 ["sort-by" "by-var-part"]
                                                 ["map"
                                                  ["fn"
                                                   ["code-entry"]
                                                   ["let"
                                                    [["path" ["first" "code-entry"]]
                                                     ["var-part" ["last" ["string/split" "path" ["re-pattern" "|/"]]]]]
                                                    ["[]"
                                                     "var-part"
                                                     ["div"
                                                      ["{}"
                                                       [":style" "widget/var-entry"]
                                                       [":event"
                                                        ["{}" [":click" ["on-edit-definition" "ns-name" "path"]]]]
                                                       [":attrs" ["{}" [":inner-text" "var-part"]]]]]]]]]]]]]]]]],
                             "style-file" ["def"
                                           "style-file"
                                           ["{}"
                                            [":display" ":inline-block"]
                                            [":vertical-align" ":top"]
                                            [":width" "240"]
                                            [":margin-top" "16"]]],
                             "style-list" ["def" "style-list" ["{}" [":max-height" "240"] [":overflow" "|auto"]]],
                             "on-edit-definition" ["defn"
                                                   "on-edit-definition"
                                                   ["ns-name" "definition-path"]
                                                   ["fn"
                                                    ["e" "dispatch!"]
                                                    ["dispatch!"
                                                     ":collection/edit"
                                                     ["{}"
                                                      [":ns" "ns-name"]
                                                      [":kind" ":defs"]
                                                      [":extra" "definition-path"]
                                                      [":focus" ["[]"]]]]
                                                    ["focus!"]]],
                             "by-var-part" ["defn"
                                            "by-var-part"
                                            ["code-entry"]
                                            ["let"
                                             [["path" ["first" "code-entry"]]]
                                             ["last" ["string/split" "path" "|/"]]]],
                             "with-query" ["defn"
                                           "with-query"
                                           ["state"]
                                           ["fn"
                                            ["x"]
                                            ["if"
                                             ["string/blank?" "state"]
                                             "true"
                                             ["string/includes?" ["first" "x"] "state"]]]]},
                      :procs []},
         "util.querystring" {:ns ["ns"
                                  "stack-editor.util.querystring"
                                  [":require" ["[]" "clojure.string" ":as" "string"]]],
                             :defs {"parse-query" ["defn"
                                                   "parse-query"
                                                   ["search"]
                                                   ["if"
                                                    ["=" "search" "|"]
                                                    ["{}"]
                                                    ["let"
                                                     [["content" ["subs" "search" "1"]]
                                                      ["pairs"
                                                       ["map"
                                                        ["fn" ["piece"] ["string/split" "piece" "|="]]
                                                        ["string/split" "content" "|&"]]]]
                                                     ["into" ["{}"] "pairs"]]]]},
                             :procs []},
         "util.detect" {:ns ["ns" "stack-editor.util.detect" [":require" ["[]" "clojure.string" ":as" "string"]]],
                        :defs {"cirru-vec?" ["defn"
                                             "cirru-vec?"
                                             ["x"]
                                             ["if"
                                              ["vector?" "x"]
                                              ["every?" ["fn" ["y"] ["or" ["string?" "y"] ["cirru-vec?" "y"]]] "x"]
                                              "false"]],
                               "strip-atom" ["defn"
                                             "strip-atom"
                                             ["token"]
                                             ["->"
                                              "token"
                                              ["string/replace" ["re-pattern" "|^@"] "|"]
                                              ["string/replace" ["re-pattern" "|\\.$"] "|"]
                                              ["string/replace" ["re-pattern" "|/@"] "|/"]]],
                               "fuzzy-search" ["defn"
                                               "fuzzy-search"
                                               ["pieces" "queries"]
                                               ["every?"
                                                ["fn"
                                                 ["query"]
                                                 ["some"
                                                  ["fn" ["piece"] ["string/includes?" ["str" "piece"] "query"]]
                                                  "pieces"]]
                                                "queries"]],
                               "contains-def?" ["defn"
                                                "contains-def?"
                                                ["files" "ns-part" "name-part"]
                                                ["println" "|Contains def:" "ns-part" "name-part"]
                                                ["if"
                                                 ["contains?" "files" "ns-part"]
                                                 ["let"
                                                  [["dict" ["get-in" "files" ["[]" "ns-part" ":defs"]]]]
                                                  ["contains?" "dict" "name-part"]]
                                                 "false"]],
                               "tree-contains?" ["defn"
                                                 "tree-contains?"
                                                 ["tree" "x"]
                                                 ["if"
                                                  ["string?" "tree"]
                                                  ["=" "tree" "x"]
                                                  ["if"
                                                   ["empty?" "tree"]
                                                   "false"
                                                   ["let"
                                                    [["cursor" ["first" "tree"]]
                                                     ["at-head?" ["tree-contains?" "cursor" "x"]]]
                                                    ["if" "at-head?" "true" ["recur" ["rest" "tree"] "x"]]]]]],
                               "=path?" ["defn"
                                         "=path?"
                                         ["x" "y"]
                                         ["and"
                                          ["=" [":ns" "x"] [":ns" "y"]]
                                          ["=" [":kind" "x"] [":kind" "y"]]
                                          ["=" [":extra" "x"] [":extra" "y"]]]]},
                        :procs []},
         "updater.modal" {:ns ["ns" "stack-editor.updater.modal"],
                          :defs {"mould" ["defn"
                                          "mould"
                                          ["store" "op-data" "op-id"]
                                          ["let"
                                           [["modal" "op-data"]]
                                           ["update" "store" ":modal-stack" ["fn" ["stack"] ["conj" "stack" "modal"]]]]],
                                 "recycle" ["defn"
                                            "recycle"
                                            ["store" "op-data" "op-id"]
                                            ["update"
                                             "store"
                                             ":modal-stack"
                                             ["fn" ["stack"] ["into" ["[]"] ["butlast" "stack"]]]]]},
                          :procs []},
         "comp.hydrate" {:ns ["ns"
                              "stack-editor.comp.hydrate"
                              [":require"
                               ["[]" "hsl.core" ":refer" ["[]" "hsl"]]
                               ["[]" "respo.alias" ":refer" ["[]" "create-comp" "div" "textarea" "button"]]
                               ["[]" "respo.comp.text" ":refer" ["[]" "comp-text"]]
                               ["[]" "respo.comp.space" ":refer" ["[]" "comp-space"]]
                               ["[]" "respo.comp.debug" ":refer" ["[]" "comp-debug"]]
                               ["[]" "respo-ui.style" ":as" "ui"]
                               ["[]" "stack-editor.style.widget" ":as" "widget"]
                               ["[]" "cljs.reader" ":refer" ["[]" "read-string"]]
                               ["[]" "stack-editor.util.detect" ":refer" ["[]" "cirru-vec?"]]]],
                         :defs {"style-textarea" ["def"
                                                  "style-textarea"
                                                  ["{}"
                                                   [":background-color" ["hsl" "0" "0" "100" "0.2"]]
                                                   [":font-family" "|Source Code Pro, Menlo"]
                                                   [":color" ":white"]
                                                   [":resize" ":none"]
                                                   [":width" "640"]
                                                   [":height" "200"]
                                                   [":line-height" "|24px"]]],
                                "style-hint" ["def" "style-hint" ["{}" [":font-family" "|Hind"]]],
                                "style-toolbar" ["def" "style-toolbar" ["{}" [":justify-content" ":flex-end"]]],
                                "on-change" ["defn"
                                             "on-change"
                                             ["cursor"]
                                             ["fn"
                                              ["e" "dispatch!"]
                                              ["dispatch!" ":states" ["[]" "cursor" [":value" "e"]]]]],
                                "comp-hydrate" ["def"
                                                "comp-hydrate"
                                                ["create-comp"
                                                 ":hydrate"
                                                 ["fn"
                                                  ["states"]
                                                  ["fn"
                                                   ["cursor"]
                                                   ["let"
                                                    [["state" [":data" "states"]]]
                                                    ["div"
                                                     ["{}"]
                                                     ["div"
                                                      ["{}" [":style" "style-hint"]]
                                                      ["comp-text" "|EDN Cirru code to hydrate:" "nil"]]
                                                     ["div"
                                                      ["{}"]
                                                      ["textarea"
                                                       ["{}"
                                                        [":style" ["merge" "ui/textarea" "style-textarea"]]
                                                        [":attrs" ["{}" [":value" "state"]]]
                                                        [":event" ["{}" [":input" ["on-change" "cursor"]]]]]]]
                                                     ["comp-space" "nil" "8"]
                                                     ["div"
                                                      ["{}" [":style" ["merge" "ui/row" "style-toolbar"]]]
                                                      ["button"
                                                       ["{}"
                                                        [":style" "widget/button"]
                                                        [":event" ["{}" [":click" ["on-hydrate" "state"]]]]]
                                                       ["comp-text" "|Hydrate" "nil"]]]]]]]]],
                                "on-hydrate" ["defn"
                                              "on-hydrate"
                                              ["text"]
                                              ["fn"
                                               ["e" "dispatch!"]
                                               ["let"
                                                [["piece" ["read-string" "text"]]]
                                                ["if"
                                                 ["cirru-vec?" "piece"]
                                                 ["do"
                                                  ["dispatch!" ":collection/hydrate" "piece"]
                                                  ["dispatch!" ":modal/recycle" "nil"]]
                                                 ["dispatch!"
                                                  ":notification/add-one"
                                                  ["str" "|Checking failed: " ["pr-str" "text"]]]]]]]},
                         :procs []},
         "updater.collection" {:ns ["ns"
                                    "stack-editor.updater.collection"
                                    [":require"
                                     ["[]" "clojure.string" ":as" "string"]
                                     ["[]"
                                      "stack-editor.util"
                                      ":refer"
                                      ["[]" "helper-notify" "helper-put-ns" "make-path"]]
                                     ["[]" "stack-editor.util.detect" ":refer" ["[]" "=path?"]]]],
                               :defs {"rename" ["defn"
                                                "rename"
                                                ["store" "op-data" "op-id"]
                                                ["let"
                                                 [[["[]" "code-path" "new-form"] "op-data"]
                                                  [["{}"
                                                    ["ns-part" ":ns"]
                                                    ["kind" ":kind"]
                                                    ["extra-name" ":extra"]
                                                    ["focus" ":focus"]]
                                                   "code-path"]
                                                  ["pointer" ["get-in" "store" ["[]" ":writer" ":pointer"]]]]
                                                 ["case"
                                                  "kind"
                                                  [":ns"
                                                   ["->"
                                                    "store"
                                                    ["update-in"
                                                     ["[]" ":collection" ":files"]
                                                     ["fn"
                                                      ["files"]
                                                      ["->"
                                                       "files"
                                                       ["dissoc" "ns-part"]
                                                       ["assoc" "new-form" ["get" "files" "ns-part"]]]]]
                                                    ["assoc-in"
                                                     ["[]" ":writer" ":stack" "pointer"]
                                                     ["{}"
                                                      [":ns" "new-form"]
                                                      [":kind" ":ns"]
                                                      [":extra" "nil"]
                                                      [":focus" "focus"]]]]]
                                                  [":defs"
                                                   ["let"
                                                    [[["[]" "new-ns" "new-name"] ["string/split" "new-form" "|/"]]]
                                                    ["->"
                                                     "store"
                                                     ["update-in"
                                                      ["[]" ":collection" ":files"]
                                                      ["fn"
                                                       ["files"]
                                                       ["if"
                                                        ["=" "new-ns" "ns-part"]
                                                        ["update-in"
                                                         "files"
                                                         ["[]" "ns-part" ":defs"]
                                                         ["fn"
                                                          ["dict"]
                                                          ["->"
                                                           "dict"
                                                           ["dissoc" "extra-name"]
                                                           ["assoc" "new-name" ["get" "dict" "extra-name"]]]]]
                                                        ["->"
                                                         "files"
                                                         ["update-in"
                                                          ["[]" "ns-part" ":defs"]
                                                          ["fn" ["dict"] ["dissoc" "dict" "extra-name"]]]
                                                         ["assoc-in"
                                                          ["[]" "new-ns" ":defs" "new-name"]
                                                          ["get-in"
                                                           "files"
                                                           ["if"
                                                            ["=" ":defs" "kind"]
                                                            ["[]" "ns-part" ":defs" "extra-name"]
                                                            ["[]" "ns-part" "kind"]]]]]]]]
                                                     ["assoc-in"
                                                      ["[]" ":writer" ":stack" "pointer"]
                                                      ["{}"
                                                       [":ns" "new-ns"]
                                                       [":kind" ":defs"]
                                                       [":extra" "new-name"]
                                                       [":focus" "focus"]]]]]]
                                                  ["do" ["println" "|Cannot rename:" "code-path" "new-form"] "store"]]]],
                                      "remove-this" ["defn"
                                                     "remove-this"
                                                     ["store" "op-data" "op-id"]
                                                     ["let"
                                                      [["writer" [":writer" "store"]]
                                                       ["stack" [":stack" "writer"]]
                                                       ["pointer" [":pointer" "writer"]]
                                                       ["path" ["get" "stack" "pointer"]]
                                                       [["[]" "ns-part" "kind" "extra-name"] "path"]]
                                                      ["->"
                                                       "store"
                                                       ["update-in"
                                                        ["[]" ":collection" ":files"]
                                                        ["fn"
                                                         ["files"]
                                                         ["case"
                                                          "kind"
                                                          [":defs"
                                                           ["update-in"
                                                            "files"
                                                            ["[]" "ns-part" ":defs"]
                                                            ["fn" ["defs"] ["dissoc" "defs" "extra-name"]]]]
                                                          [":procs"
                                                           ["assoc-in" "files" ["[]" "ns-part" ":procs"] ["[]"]]]
                                                          [":ns" ["dissoc" "files" "ns-part"]]
                                                          "files"]]]
                                                       ["update-in"
                                                        ["[]" ":writer" ":stack"]
                                                        ["fn"
                                                         ["stack"]
                                                         ["cond"
                                                          [["empty?" "stack"] "stack"]
                                                          [["zero?" "pointer"] ["subvec" "stack" "1"]]
                                                          [["=" ["inc" "pointer"] ["count" "stack"]]
                                                           ["subvec" "stack" "0" ["dec" ["count" "stack"]]]]
                                                          [":else"
                                                           ["into"
                                                            ["[]"]
                                                            ["concat"
                                                             ["subvec" "stack" "0" "pointer"]
                                                             ["subvec" "stack" ["inc" "pointer"]]]]]]]]
                                                       ["update-in"
                                                        ["[]" ":writer" ":pointer"]
                                                        ["fn"
                                                         ["pointer"]
                                                         ["if" ["pos?" "pointer"] ["dec" "pointer"] "pointer"]]]]]],
                                      "expand-ns" ["defn"
                                                   "expand-ns"
                                                   ["store" "op-data" "op-id"]
                                                   ["let"
                                                    [["writer" [":writer" "store"]]
                                                     ["file-path" ["get" [":stack" "writer"] [":pointer" "writer"]]]
                                                     ["base-path" ["[]" ":collection" ":files"]]
                                                     ["files" ["get-in" "store" "base-path"]]
                                                     ["ns-name" ["first" "file-path"]]
                                                     ["focus" [":focus" "writer"]]
                                                     ["buffer" ["get-in" "files" ["concat" "file-path" "focus"]]]]
                                                    ["if"
                                                     ["and" ["string?" "buffer"] ["string/includes?" "buffer" "|/"]]
                                                     ["let"
                                                      [[["[]" "ns-x" "def-x"] ["string/split" "buffer" "|/"]]
                                                       ["ns-ast" ["get-in" "files" ["[]" "ns-name" ":ns"]]]
                                                       ["maybe-rule"
                                                        ["first"
                                                         ["filter"
                                                          ["fn" ["rule"] ["=" "ns-x" ["get" "rule" "1"]]]
                                                          ["rest" ["get" "ns-ast" "2"]]]]]]
                                                      ["cond"
                                                       [["nil?" "maybe-rule"]
                                                        ["->"
                                                         "store"
                                                         ["assoc-in" ["concat" "base-path" "file-path" "focus"] "def-x"]
                                                         ["update-in"
                                                          ["[]" ":collection" ":files" "ns-name" ":ns" "2"]
                                                          ["fn"
                                                           ["require-rules"]
                                                           ["conj"
                                                            ["into" ["[]"] "require-rules"]
                                                            ["[]" "|[]" "ns-x" "|:refer" ["[]" "|[]" "def-x"]]]]]
                                                         ["update" ":writer" ["helper-put-ns" "ns-name"]]]]
                                                       [["=" "|:refer" ["get" "maybe-rule" "2"]]
                                                        ["->"
                                                         "store"
                                                         ["assoc-in" ["concat" "base-path" "file-path" "focus"] "def-x"]
                                                         ["update-in"
                                                          ["[]" ":collection" ":files" "ns-name" ":ns" "2"]
                                                          ["fn"
                                                           ["require-rules"]
                                                           ["->>"
                                                            "require-rules"
                                                            ["map"
                                                             ["fn"
                                                              ["or-rule"]
                                                              ["if"
                                                               ["=" "or-rule" "|:require"]
                                                               "|:require"
                                                               ["if"
                                                                ["=" "ns-x" ["get" "or-rule" "1"]]
                                                                ["update"
                                                                 "or-rule"
                                                                 "3"
                                                                 ["fn"
                                                                  ["defs"]
                                                                  ["if"
                                                                   ["contains?" ["into" ["#{}"] "defs"] "def-x"]
                                                                   "defs"
                                                                   ["conj" "defs" "def-x"]]]]
                                                                "or-rule"]]]]]]]
                                                         ["update" ":writer" ["helper-put-ns" "ns-name"]]]]
                                                       [["=" "|:as" ["get" "maybe-rule" "2"]]
                                                        ["let"
                                                         [["new-ns" ["last" "maybe-rule"]]]
                                                         ["->"
                                                          "store"
                                                          ["assoc-in"
                                                           ["concat" "base-path" "file-path" "focus"]
                                                           ["str" "new-ns" "|/" "def-x"]]]]]
                                                       [":else" ["println" "|Unkown rule:" "maybe-rule"] "store"]]]
                                                     ["update"
                                                      "store"
                                                      ":notifications"
                                                      ["helper-notify" "op-id" "|Not valid ns/def form!"]]]]],
                                      "write-code" ["defn"
                                                    "write-code"
                                                    ["store" "op-data"]
                                                    ["let"
                                                     [["tree" [":tree" "op-data"]]
                                                      ["focus" [":focus" "op-data"]]
                                                      ["writer" [":writer" "store"]]
                                                      ["stack" [":stack" "writer"]]
                                                      ["pointer" [":pointer" "writer"]]
                                                      ["clipboard" [":clipboard" "op-data"]]
                                                      ["path-info" ["get" "stack" "pointer"]]]
                                                     ["->"
                                                      "store"
                                                      ["assoc-in" ["[]" ":writer" ":stack" "pointer" ":focus"] "focus"]
                                                      ["assoc-in" ["[]" ":writer" ":clipboard"] "clipboard"]
                                                      ["assoc-in" ["make-path" "path-info"] "tree"]]]],
                                      "hydrate" ["defn"
                                                 "hydrate"
                                                 ["store" "op-data" "op-id"]
                                                 ["let"
                                                  [["writer" [":writer" "store"]]
                                                   ["collection" [":collection" "store"]]
                                                   ["code-path" ["get" [":stack" "writer"] [":pointer" "writer"]]]]
                                                  ["println" "code-path"]
                                                  ["assoc-in"
                                                   "store"
                                                   ["concat" ["make-path" "code-path"] [":focus" "code-path"]]
                                                   "op-data"]]],
                                      "edit" ["defn"
                                              "edit"
                                              ["store" "op-data"]
                                              ["let"
                                               [["path" "op-data"]]
                                               ["->"
                                                "store"
                                                ["update"
                                                 ":writer"
                                                 ["fn"
                                                  ["writer"]
                                                  ["let"
                                                   [["stack" [":stack" "writer"]]
                                                    ["pos"
                                                     ["loop"
                                                      ["[]" "xs" "stack" "x" "0"]
                                                      ["if"
                                                       ["empty?" "xs"]
                                                       "-1"
                                                       ["do"
                                                        ["println" "path" ["first" "xs"]]
                                                        ["if"
                                                         ["=path?" "path" ["first" "xs"]]
                                                         "x"
                                                         ["recur" ["rest" "xs"] ["inc" "x"]]]]]]]]
                                                   ["if"
                                                    ["neg?" "pos"]
                                                    ["->"
                                                     "writer"
                                                     ["assoc" ":focus" ["[]"]]
                                                     ["update"
                                                      ":pointer"
                                                      ["fn" ["p"] ["if" ["empty?" "stack"] "p" ["inc" "p"]]]]
                                                     ["update"
                                                      ":stack"
                                                      ["fn"
                                                       ["stack"]
                                                       ["if"
                                                        ["empty?" "stack"]
                                                        ["[]" "path"]
                                                        ["conj"
                                                         ["subvec" "stack" "0" ["inc" [":pointer" "writer"]]]
                                                         "path"]]]]]
                                                    ["->" "writer" ["assoc" ":pointer" "pos"]]]]]]
                                                ["assoc" ":router" ["{}" [":name" ":workspace"] [":data" "nil"]]]]]],
                                      "add-definition" ["defn"
                                                        "add-definition"
                                                        ["store" "op-data"]
                                                        ["let"
                                                         [[["[]" "that-ns" "that-name"] "op-data"]
                                                          ["path"
                                                           ["[]" ":collection" ":files" "that-ns" ":defs" "that-name"]]
                                                          ["maybe-definition" ["get-in" "store" "path"]]]
                                                         ["if"
                                                          ["some?" "maybe-definition"]
                                                          "store"
                                                          ["assoc-in" "store" "path" ["[]" "|defn" "that-name" ["[]"]]]]]],
                                      "edit-ns" ["defn"
                                                 "edit-ns"
                                                 ["store" "op-data" "op-id"]
                                                 ["let"
                                                  [["writer" [":writer" "store"]]
                                                   ["stack" [":stack" "writer"]]
                                                   ["pointer" [":pointer" "writer"]]
                                                   ["code-path" ["get" "stack" "pointer"]]
                                                   ["pkg" ["get-in" "store" ["[]" ":collection" ":package"]]]]
                                                  ["println" "|Edit ns:" "code-path"]
                                                  ["if"
                                                   ["=" ["last" "code-path"] ":ns"]
                                                   ["let"
                                                    [["guess-ns"
                                                      ["get-in"
                                                       "store"
                                                       ["concat"
                                                        ["[]" ":collection" ":files"]
                                                        "code-path"
                                                        [":focus" "writer"]]]]
                                                     ["ns-name"
                                                      ["if"
                                                       ["some?" "guess-ns"]
                                                       ["string/replace" "guess-ns" ["str" "pkg" "|."] "|"]
                                                       "nil"]]]
                                                    ["if"
                                                     ["and"
                                                      ["some?" "ns-name"]
                                                      ["some?"
                                                       ["get-in" "store" ["[]" ":collection" ":files" "ns-name"]]]]
                                                     ["update" "store" ":writer" ["helper-put-ns" "ns-name"]]
                                                     ["update"
                                                      "store"
                                                      ":notifications"
                                                      ["fn"
                                                       ["notifications"]
                                                       ["into"
                                                        ["[]"]
                                                        ["cons"
                                                         ["[]" "op-id" ["str" "|\"" "ns-name" "|\" not found"]]
                                                         "notifications"]]]]]]
                                                   ["let"
                                                    [["ns-part" ["first" "code-path"]]]
                                                    ["update" "store" ":writer" ["helper-put-ns" "ns-part"]]]]]],
                                      "load-remote" ["defn"
                                                     "load-remote"
                                                     ["store" "op-data"]
                                                     ["let"
                                                      [["collection" "op-data"]]
                                                      ["--" "println" "|loading:" "collection"]
                                                      ["->"
                                                       "store"
                                                       ["update"
                                                        ":collection"
                                                        ["fn" ["cursor"] ["merge" "cursor" "collection"]]]]]],
                                      "add-namespace" ["defn"
                                                       "add-namespace"
                                                       ["store" "op-data"]
                                                       ["let"
                                                        [["namespace'" "op-data"]
                                                         ["basic-code"
                                                          ["[]"
                                                           "|ns"
                                                           ["str"
                                                            ["get-in" "store" ["[]" ":collection" ":package"]]
                                                            "|."
                                                            "namespace'"]]]]
                                                        ["->"
                                                         "store"
                                                         ["assoc-in"
                                                          ["[]" ":collection" ":files" "namespace'"]
                                                          ["{}" [":ns" "basic-code"] [":defs" ["{}"]] [":procs" ["[]"]]]]]]]},
                               :procs []},
         "comp.hot-corner" {:ns ["ns"
                                 "stack-editor.comp.hot-corner"
                                 [":require"
                                  ["[]" "hsl.core" ":refer" ["[]" "hsl"]]
                                  ["[]" "respo.alias" ":refer" ["[]" "create-comp" "div" "span"]]
                                  ["[]" "respo.comp.text" ":refer" ["[]" "comp-text"]]
                                  ["[]" "respo.comp.space" ":refer" ["[]" "comp-space"]]
                                  ["[]" "respo-ui.style" ":as" "ui"]]],
                            :defs {"comp-hot-corner" ["def"
                                                      "comp-hot-corner"
                                                      ["create-comp"
                                                       ":hot-corner"
                                                       ["fn"
                                                        ["router" "writer"]
                                                        ["fn"
                                                         ["cursor"]
                                                         ["div"
                                                          ["{}"
                                                           [":style"
                                                            ["{}"
                                                             [":font-size" "|24px"]
                                                             [":font-weight" "|300"]
                                                             [":text-align" "|center"]
                                                             [":cursor" "|pointer"]]]
                                                           [":event" ["{}" [":click" ["on-switch" "router" "writer"]]]]]
                                                          ["comp-text"
                                                           "|Stack Editor"
                                                           ["{}" [":font-family" "|Josefin Sans"]]]]]]]],
                                   "on-switch" ["defn"
                                                "on-switch"
                                                ["router" "writer"]
                                                ["fn"
                                                 ["e" "dispatch!"]
                                                 ["if"
                                                  ["=" [":name" "router"] ":workspace"]
                                                  ["dispatch!"
                                                   ":router/route"
                                                   ["{}" [":name" ":analyzer"] [":data" ":definitions"]]]
                                                  ["if"
                                                   ["not" ["empty?" [":stack" "writer"]]]
                                                   ["dispatch!"
                                                    ":router/route"
                                                    ["{}" [":name" ":workspace"] [":data" "nil"]]]]]]]},
                            :procs []},
         "actions" {:ns ["ns"
                         "stack-editor.actions"
                         [":require"
                          ["[]" "cljs.reader" ":refer" ["[]" "read-string"]]
                          ["[]" "ajax.core" ":refer" ["[]" "GET" "POST" "PATCH" "json-request-format"]]
                          ["[]" "stack-editor.util" ":refer" ["[]" "make-path"]]
                          ["[]" "stack-editor.util.querystring" ":refer" ["[]" "parse-query"]]
                          ["[]" "shallow-diff.diff" ":refer" ["[]" "diff"]]]],
                    :defs {"load-collection!" ["defn"
                                               "load-collection!"
                                               ["dispatch!" "open-analyzer?"]
                                               ["println" ["pr-str" "options"]]
                                               ["GET"
                                                ["str"
                                                 "|http://"
                                                 ["get" "options" "|host"]
                                                 "|:"
                                                 ["get" "options" "|port"]]
                                                ["{}"
                                                 [":handler"
                                                  ["fn"
                                                   ["response"]
                                                   ["let"
                                                    [["sepal-data" ["read-string" "response"]]]
                                                    ["if"
                                                     ["not" ["contains?" "sepal-data" ":package"]]
                                                     ["js/alert" "|Cannot find a :package field"]]
                                                    ["dispatch!" ":collection/load" "sepal-data"]
                                                    ["if"
                                                     "open-analyzer?"
                                                     ["dispatch!"
                                                      ":router/route"
                                                      ["{}" [":name" ":analyzer"] [":data" "nil"]]]]
                                                    ["reset!" "remote-sepal-ref" "sepal-data"]]]]
                                                 [":error-handler"
                                                  ["fn"
                                                   ["error"]
                                                   ["println" "error"]
                                                   ["dispatch!" ":notification/add-one" "|Failed to fetch collection"]]]]]],
                           "submit-changes!" ["defn"
                                              "submit-changes!"
                                              ["collection" "dispatch!"]
                                              ["PATCH"
                                               ["str"
                                                "|http://"
                                                ["get" "options" "|host"]
                                                "|:"
                                                ["get" "options" "|port"]]
                                               ["{}"
                                                [":format" ["json-request-format"]]
                                                [":body" ["pr-str" ["diff" "@remote-sepal-ref" "collection"]]]
                                                [":handler"
                                                 ["fn"
                                                  ["response"]
                                                  ["println" "response"]
                                                  ["dispatch!" ":notification/add-one" "|Patched"]
                                                  ["reset!" "remote-sepal-ref" "collection"]]]
                                                [":error-handler"
                                                 ["fn"
                                                  ["error"]
                                                  ["println" "error"]
                                                  ["if"
                                                   ["zero?" [":status" "error"]]
                                                   ["dispatch!" ":notification/add-one" "|Connection failed!"]
                                                   ["let"
                                                    [["response" ["read-string" [":response" "error"]]]]
                                                    ["dispatch!" ":notification/add-one" [":status" "response"]]]]]]]]],
                           "remote-sepal-ref" ["defonce" "remote-sepal-ref" ["atom" "nil"]],
                           "options" ["def"
                                      "options"
                                      ["merge"
                                       ["{}" ["|port" "|7010"] ["|host" "|localhost"]]
                                       ["parse-query" [".-search" "js/location"]]]],
                           "submit-collection!" ["defn"
                                                 "submit-collection!"
                                                 ["collection" "dispatch!"]
                                                 ["POST"
                                                  ["str"
                                                   "|http://"
                                                   ["get" "options" "|host"]
                                                   "|:"
                                                   ["get" "options" "|port"]]
                                                  ["{}"
                                                   [":format" ["json-request-format"]]
                                                   [":body" ["pr-str" "collection"]]
                                                   [":handler"
                                                    ["fn"
                                                     ["response"]
                                                     ["println" "response"]
                                                     ["dispatch!" ":notification/add-one" "|Saved"]
                                                     ["reset!" "remote-sepal-ref" "collection"]]]
                                                   [":error-handler"
                                                    ["fn"
                                                     ["error"]
                                                     ["println" "error"]
                                                     ["if"
                                                      ["zero?" [":status" "error"]]
                                                      ["dispatch!" ":notification/add-one" "|Connection failed!"]
                                                      ["let"
                                                       [["response" ["read-string" [":response" "error"]]]]
                                                       ["dispatch!" ":notification/add-one" [":status" "response"]]]]]]]]],
                           "display-code!" ["defn"
                                            "display-code!"
                                            ["store"]
                                            ["let"
                                             [["writer" [":writer" "store"]]
                                              ["collection" [":collection" "store"]]
                                              ["path-info" ["get" [":stack" "writer"] [":pointer" "writer"]]]
                                              ["tree" ["get-in" "store" ["make-path" "path-info"]]]]
                                             ["if"
                                              ["some?" "tree"]
                                              ["->"
                                               "js/window"
                                               [".open"]
                                               [".-document"]
                                               [".write" "|<pre><code>" ["pr-str" "tree"] "|</code></pre>"]]]]]},
                    :procs []},
         "style.widget" {:ns ["ns"
                              "stack-editor.style.widget"
                              [":require" ["[]" "hsl.core" ":refer" ["[]" "hsl"]] ["[]" "respo-ui.style" ":as" "ui"]]],
                         :defs {"entry-line" ["def" "entry-line" ["merge" "var-entry" ["{}" [":display" "|block"]]]],
                                "clickable-text" ["def" "clickable-text" ["{}" [":text-decoration" ":underline"]]],
                                "input" ["def"
                                         "input"
                                         ["merge"
                                          "ui/input"
                                          ["{}"
                                           [":background-color" ["hsl" "0" "0" "100" "0.14"]]
                                           [":color" ["hsl" "0" "0" "100"]]
                                           [":font-family" "|Source Code Pro,Menlo,monospace"]
                                           [":width" "|320px"]]]],
                                "var-entry" ["def"
                                             "var-entry"
                                             ["{}"
                                              [":color" ["hsl" "0" "0" "80"]]
                                              [":cursor" "|pointer"]
                                              [":font-family" "|Source Code Pro,Menlo,monospace"]
                                              [":font-size" "|14px"]
                                              [":line-height" "|24px"]
                                              [":min-width" "|160px"]]],
                                "entry" ["def"
                                         "entry"
                                         ["{}"
                                          [":display" "|inline-block"]
                                          [":background-color" ["hsl" "200" "10" "40" "0"]]
                                          [":color" ["hsl" "0" "0" "100"]]
                                          [":padding" "|0 8px"]
                                          [":cursor" "|pointer"]
                                          [":margin-bottom" "|8px"]]],
                                "button" ["def"
                                          "button"
                                          ["merge"
                                           "ui/button"
                                           ["{}"
                                            [":background-color" ["hsl" "0" "0" "100" "0.2"]]
                                            [":color" ["hsl" "0" "0" "100" "0.6"]]
                                            [":height" "28"]
                                            [":line-height" "|28px"]]]]},
                         :procs []}}}
