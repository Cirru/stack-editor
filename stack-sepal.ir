{:definitions {"updater.notification/add-one" ["defn" "add-one" ["store" "op-data" "op-id"] ["let" [["notification" "op-data"]] ["->" "store" ["update" ":notifications" ["fn" ["notifications"] ["into" ["[]"] ["cons" ["[]" "op-id" "notification"] ["take" "3" "notifications"]]]]]]]], "main/dispatch!" ["defn" "dispatch!" ["op" "op-data"] ["--" "println" "|dispatch!" "op" "op-data"] ["let" [["new-store" ["if" ["=" "op" ":effect/submit"] ["let" [[["[]" "shift?" "collection"] "op-data"]] ["if" "shift?" ["submit-collection!" "collection" "dispatch!"] ["submit-changes!" "collection" "dispatch!"]] "@store-ref"] ["updater" "@store-ref" "op" "op-data" ["now!"]]]]] ["reset!" "store-ref" "new-store"]]], "updater.collection/write-code" ["defn" "write-code" ["store" "op-data"] ["let" [["tree" [":tree" "op-data"]] ["focus" [":focus" "op-data"]] ["writer" [":writer" "store"]] ["stack" [":stack" "writer"]] ["pointer" [":pointer" "writer"]] ["clipboard" [":clipboard" "op-data"]]] ["->" "store" ["assoc-in" ["[]" ":writer" ":focus"] "focus"] ["assoc-in" ["[]" ":writer" ":clipboard"] "clipboard"] ["assoc-in" ["cons" ":collection" ["get" "stack" "pointer"]] "tree"]]]], "comp.modal-stack/on-tip" ["defn" "on-tip" ["e" "dispatch!"]], "style.widget/entry-line" ["def" "entry-line" ["merge" "var-entry" ["{}" [":display" "|block"]]]], "updater.collection/set-main" ["defn" "set-main" ["store" "op-data"] ["let" [["main-definition" "op-data"]] ["assoc-in" "store" ["[]" ":collection" ":main-definition"] "main-definition"]]], "comp.define/on-proc" ["defn" "on-proc" ["ns-name"] ["fn" ["e" "dispatch!"] ["dispatch!" ":collection/edit" ["[]" ":procedures" "ns-name"]]]], "main/-main!" ["defn" "-main!" [] ["enable-console-print!"] ["if" ["not" ["empty?" "ssr-stages"]] ["let" [["target" [".querySelector" "js/document" "|#app"]]] ["falsify-stage!" "target" ["render-element" ["comp-container" "@store-ref" "ssr-stages"] "states-ref"] "dispatch!"]]] ["render-app!"] ["add-watch" "store-ref" ":gc" ["fn" [] ["gc-states!" "states-ref"]]] ["add-watch" "store-ref" ":changes" "render-app!"] ["add-watch" "states-ref" ":changes" "render-app!"] [".addEventListener" "js/window" "|keydown" ["fn" ["event"] ["let" [["code" [".-keyCode" "event"]] ["command?" ["or" [".-metaKey" "event"] [".-ctrlKey" "event"]]] ["shift?" [".-shiftKey" "event"]]] ["cond" [["and" "command?" ["=" "code" "keycode/key-p"]] ["do" [".preventDefault" "event"] [".stopPropagation" "event"] ["dispatch!" ":router/toggle-palette" "nil"] ["dom/focus-palette!"]]] [["and" "shift?" "command?" ["=" "code" "keycode/key-a"]] ["do" ["let" [["router" [":router" "@store-ref"]] ["writer" [":writer" "@store-ref"]]] ["if" ["=" [":name" "router"] ":workspace"] ["dispatch!" ":router/route" ["{}" [":name" ":analyzer"] [":data" ":definitions"]]] ["if" ["not" ["empty?" [":stack" "writer"]]] ["dispatch!" ":router/route" ["{}" [":name" ":workspace"] [":data" "nil"]]]]]]]] [":else" "nil"]]]]] ["println" "|app started!"] ["load-collection!" "dispatch!"]], "comp.workspace/update-state" ["defn" "update-state" ["state" "new-state"] ["merge" "state" "new-state"]], "util.analyze/compute-ns" ["defn" "compute-ns" ["piece" "current-def" "namespaces" "definitions"] ["let" [["current-ns" ["first" ["string/split" "current-def" "|/"]]] ["this-namespace" ["get" "namespaces" "current-ns"]]] ["if" ["string/includes?" "piece" "|/"] ["let" [[["[]" "that-ns" "that-value"] ["string/split" "piece" "|/"]]] ["locate-ns" "that-ns" "current-ns" "namespaces"]] ["let" [["maybe-this-def" ["str" "current-ns" "|/" "piece"]]] ["if" ["contains?" "definitions" "maybe-this-def"] "current-ns" ["locate-ns-by-var" "piece" "current-ns" "namespaces"]]]]]], "comp.rename-path/init-state" ["defn" "init-state" ["code-path"] ["last" "code-path"]], "comp.loading/render" ["defn" "render" ["store"] ["fn" ["state" "mutate!"] ["div" ["{}" [":style" ["merge" "ui/fullscreen" "ui/row-center" "style-loading"]]] ["comp-text" "|Loading..." "nil"]]]], "comp.ns-creator/render" ["defn" "render" ["pkg"] ["fn" ["state" "mutate!"] ["div" ["{}"] ["input" ["{}" [":style" "widget/input"] [":event" ["{}" [":input" ["on-input" "mutate!"]]]] [":attrs" ["{}" [":value" "state"] [":placeholder" ["str" "pkg" "|."]]]]]] ["comp-space" "|8px" "nil"] ["div" ["{}" [":style" "widget/button"] [":event" ["{}" [":click" ["on-click" "state" "mutate!"]]]]] ["comp-text" "|add" "nil"]]]]], "main/on-jsload!" ["defn" "on-jsload!" [] ["clear-cache!"] ["render-app!"] ["println" "|code updated."]], "updater.collection/add-definition" ["defn" "add-definition" ["store" "op-data"] ["let" [["definition-path" "op-data"] ["path" ["[]" ":collection" ":definitions" "definition-path"]] ["maybe-definition" ["get-in" "store" "path"]] ["var-name" ["last" ["string/split" "definition-path" "|/"]]]] ["if" ["some?" "maybe-definition"] "store" ["assoc-in" "store" "path" ["[]" "|defn" "var-name" ["[]"]]]]]], "comp.main-def/render" ["defn" "render" ["main-definition"] ["fn" ["state" "mutate!"] ["div" ["{}" [":style" ["{}" [":display" "|inline-block"]]]] ["input" ["{}" [":style" "widget/input"] [":attrs" ["{}" [":value" "state"] [":placeholder" "|main/definition"]]] [":event" ["{}" [":input" ["on-input" "mutate!"]]]]]] ["comp-space" "|8px" "nil"] ["div" ["{}" [":style" ["merge" "widget/button" ["if" ["=" "main-definition" "state"] ["{}" [":background-color" ["hsl" "200" "30" "30"]]]]]] [":event" ["{}" [":click" ["on-set-main" "state"]]]]] ["comp-text" "|update -main" "nil"]]]]], "comp.command/render" ["defn" "render" ["command" "selected?" "on-select"] ["fn" ["state" "mutate!"] ["div" ["{}" [":style" ["merge" "style-command" ["if" "selected?" ["{}" [":background-color" ["hsl" "0" "0" "30"]]]]]] [":event" ["{}" [":click" ["on-click" "on-select"]]]]] ["comp-text" ["string/join" "| " "command"] "nil"]]]], "actions/load-collection!" ["defn" "load-collection!" ["dispatch!"] ["println" ["pr-str" "options"]] ["GET" ["str" "|http://" ["get" "options" "|host"] "|:" ["get" "options" "|port"]] ["{}" [":handler" ["fn" ["response"] ["println" "|response..."] ["let" [["sepal-data" ["read-string" "response"]]] ["if" ["not" ["contains?" "sepal-data" ":package"]] ["js/alert" "|Cannot find a :package field"]] ["dispatch!" ":collection/load" "sepal-data"] ["reset!" "remote-sepal-ref" "sepal-data"]]]] [":error-handler" ["fn" ["error"] ["println" "error"] ["dispatch!" ":notification/add-one" "|Failed to fetch Sepal collection"]]]]]], "style.widget/input" ["def" "input" ["merge" "ui/input" ["{}" [":background-color" ["hsl" "0" "0" "100" "0.14"]] [":color" ["hsl" "0" "0" "100"]] [":font-family" "|Source Code Pro,Menlo,monospace"] [":width" "|320px"]]]], "comp.main-def/update-state" ["defn" "update-state" ["state" "new-text"] "new-text"], "updater.stack/shift-one" ["defn" "shift-one" ["store" "op-data" "op-id"] ["let" [["pointer" "op-data"]] ["update" "store" ":writer" ["fn" ["writer"] ["->" "writer" ["update" ":stack" ["fn" ["stack"] ["remove-idx" "stack" "pointer"]]] ["update" ":pointer" ["fn" ["pointer"] ["if" ["=" "pointer" ["dec" ["count" [":stack" "writer"]]]] ["dec" "pointer"] "pointer"]]]]]]]], "comp.ns-creator/update-state" ["defn" "update-state" ["state" "text"] "text"], "style.widget/var-entry" ["def" "var-entry" ["{}" [":color" ["hsl" "0" "0" "80"]] [":cursor" "|pointer"] [":font-family" "|Source Code Pro,Menlo,monospace"] [":font-size" "|14px"] [":line-height" "|24px"] [":min-width" "|160px"]]], "updater.core/updater" ["defn" "updater" ["store" "op" "op-data" "op-id"] ["let" [["handler" ["case" "op" [":router/route" "router/route"] [":router/toggle-palette" "router/toggle-palette"] [":collection/add-definition" "collection/add-definition"] [":collection/add-procedure" "collection/add-procedure"] [":collection/add-namespace" "collection/add-namespace"] [":collection/set-main" "collection/set-main"] [":collection/edit" "collection/edit"] [":collection/edit-ns" "collection/edit-ns"] [":collection/write" "collection/write-code"] [":collection/load" "collection/load-remote"] [":collection/remove-this" "collection/remove-this"] [":collection/rename" "collection/rename"] [":notification/add-one" "notification/add-one"] [":notification/remove-one" "notification/remove-one"] [":notification/remove-since" "notification/remove-since"] [":stack/goto-definition" "stack/goto-definition"] [":stack/go-back" "stack/go-back"] [":stack/go-next" "stack/go-next"] [":stack/point-to" "stack/point-to"] [":stack/collapse" "stack/collapse"] [":stack/shift" "stack/shift-one"] [":modal/mould" "modal/mould"] [":modal/recycle" "modal/recycle"] "default-handler"]]] ["handler" "store" "op-data" "op-id"]]], "main/render-app!" ["defn" "render-app!" [] ["let" [["target" [".querySelector" "js/document" "|#app"]]] ["render!" ["comp-container" "@store-ref" ["#{}" ":shell" ":dynamic"]] "target" "dispatch!" "states-ref"]]], "updater.collection/add-namespace" ["defn" "add-namespace" ["store" "op-data"] ["let" [["namespace'" "op-data"] ["basic-code" ["[]" "|ns" ["str" ["get-in" "store" ["[]" ":collection" ":package"]] "|." "namespace'"]]]] ["->" "store" ["assoc-in" ["[]" ":collection" ":namespaces" "namespace'"] "basic-code"] ["assoc-in" ["[]" ":collection" ":procedures" "namespace'"] ["[]"]]]]], "updater.modal/mould" ["defn" "mould" ["store" "op-data" "op-id"] ["let" [["modal" "op-data"]] ["update" "store" ":modal-stack" ["fn" ["stack"] ["conj" "stack" "modal"]]]]], "comp.define/on-input" ["defn" "on-input" ["mutate!"] ["fn" ["e" "dispatch!"] ["mutate!" [":value" "e"]]]], "comp.stack/style-ns" ["def" "style-ns" ["{}" [":font-size" "|11px"] [":line-height" "1.4"] [":color" ["hsl" "0" "0" "50"]] [":font-family" "|Hind"]]], "util/remove-idx" ["defn" "remove-idx" ["xs" "idx"] ["let" [["xs-size" ["count" "xs"]]] ["cond" [["or" [">=" "idx" "xs-size"] ["neg?" "idx"]] "xs"] [["=" "xs-size" "1"] ["[]"]] [["zero?" "idx"] ["subvec" "xs" "1"]] [["=" "idx" ["dec" "xs-size"]] ["subvec" "xs" "0" "idx"]] [":else" ["into" ["[]"] ["concat" ["subvec" "xs" "0" "idx"] ["subvec" "xs" ["inc" "idx"]]]]]]]], "comp.define/style-ns" ["def" "style-ns" ["{}" [":font-family" "|Source Code Pro,Menlo,monospace"] [":white-space" ":nowrap"]]], "comp.workspace/style-removed" ["def" "style-removed" ["{}" [":margin" "|32px 16px"] [":font-size" "|14px"] [":font-weight" "|lighter"] [":color" ["hsl" "0" "80" "100"]] [":background-color" ["hsl" "0" "80" "40"]] [":padding" "|0 16px"] [":display" "|inline-block"] [":max-width" "|400px"]]], "comp.define/on-click" ["defn" "on-click" ["ns-text"] ["fn" ["e" "dispatch!"] ["dispatch!" ":collection/edit" ["[]" ":namespaces" "ns-text"]]]], "comp.analyzer/on-nav" ["defn" "on-nav" ["nav-id" "dispatch!"] ["dispatch!" ":router/route" ["{}" [":name" ":analyzer"] [":data" "nav-id"]]]], "comp.ns-creator/on-click" ["defn" "on-click" ["state" "mutate!"] ["fn" ["e" "dispatch!"] ["dispatch!" ":collection/add-namespace" "state"] ["mutate!" "|"]]], "comp.workspace/on-command" ["defn" "on-command" ["store"] ["fn" ["snapshot" "dispatch!" "e"] ["let" [["code" [":key-code" "e"]] ["event" [":original-event" "e"]] ["command?" ["or" [".-metaKey" "event"] [".-ctrlKey" "event"]]] ["shift?" [".-shiftKey" "event"]]] ["cond" [["=" "code" "keycode/key-d"] ["do" [".preventDefault" "event"] ["dispatch!" ":stack/goto-definition" "shift?"] ["focus!"]]] [["=" "code" "keycode/key-k"] ["do" [".preventDefault" "event"] ["dispatch!" ":stack/go-back" "nil"] ["focus!"]]] [["=" "code" "keycode/key-j"] ["do" [".preventDefault" "event"] ["dispatch!" ":stack/go-next" "nil"] ["focus!"]]] [["=" "code" "keycode/key-s"] ["do" [".preventDefault" "event"] ["dispatch!" ":effect/submit" ["[]" "shift?" [":collection" "store"]]]]] [["and" "command?" ["=" "code" "keycode/key-p"]] ["do" [".preventDefault" "event"] [".stopPropagation" "event"] ["dispatch!" ":router/toggle-palette" "nil"] ["dom/focus-palette!"]]] [["and" "command?" ["=" "code" "keycode/key-e"]] ["do" [".preventDefault" "event"] ["dispatch!" ":collection/edit-ns" "nil"] ["focus!"]]] [":else" "nil"]]]]], "comp.define/render" ["defn" "render" ["ns-name"] ["fn" ["state" "mutate!"] ["div" ["{}"] ["div" ["{}" [":style" "style-namespace"] [":event" ["{}" [":click" ["on-click" "ns-name"]]]]] ["comp-text" "ns-name" "style-ns"] ["comp-space" "|8px" "nil"] ["div" ["{}" [":style" ["merge" "widget/button" "style-proc"]] [":event" ["{}" [":click" ["on-proc" "ns-name"]]]]] ["comp-text" "|proc" "nil"]]] ["div" ["{}"] ["input" ["{}" [":style" ["merge" ["merge" "widget/input" ["{}" [":width" "|200px"] [":height" "|24px"]]]]] [":attrs" ["{}" [":value" "state"] [":placeholder" "|"]]] [":event" ["{}" [":input" ["on-input" "mutate!"]] [":keydown" ["on-keydown" "state" "mutate!" "ns-name"]]]]]]]]]], "updater.stack/helper-notify" ["defn" "helper-notify" ["op-id" "data"] ["fn" ["notifications"] ["into" ["[]"] ["cons" ["[]" "op-id" "data"] "notifications"]]]], "comp.define/on-keydown" ["defn" "on-keydown" ["text" "mutate!" "ns-name"] ["fn" ["e" "dispatch!"] ["if" ["and" ["=" "keycode/key-enter" [":key-code" "e"]] ["pos?" ["count" "text"]]] ["do" ["mutate!" "|"] ["dispatch!" ":collection/add-definition" ["str" "ns-name" "|/" "text"]]]]]], "util.detect/strip-atom" ["defn" "strip-atom" ["token"] ["->" "token" ["string/replace" ["re-pattern" "|^@"] "|"] ["string/replace" ["re-pattern" "|/@"] "|/"]]], "comp.palette/basic-commands" ["def" "basic-commands" ["[]" ["[]" "|save"] ["[]" "|load"]]], "schema/store" ["def" "store" ["{}" [":router" ["{}" [":name" ":loading"] [":data" ":definitions"] [":show-palette?" "false"]]] [":collection" ["{}" [":definitions" ["{}"]] [":procedures" ["{}"]] [":namespaces" ["{}"]]]] [":writer" ["{}" [":stack" ["[]"]] [":pointer" "0"] [":focus" ["[]"]] [":clipboard" ["[]"]]]] [":notifications" ["[]"]] [":modal-stack" ["[]"]]]], "comp.palette/on-input" ["defn" "on-input" ["mutate!"] ["fn" ["e" "dispatch!"] ["mutate!" ["{}" [":text" [":value" "e"]] [":cursor" "0"]]]]], "comp.ns-creator/on-input" ["defn" "on-input" ["mutate!"] ["fn" ["e" "dispatch!"] ["mutate!" [":value" "e"]]]], "updater.stack/collapse" ["defn" "collapse" ["store" "op-data" "op-id"] ["let" [["cursor" "op-data"]] ["update" "store" ":writer" ["fn" ["writer"] ["->" "writer" ["assoc" ":pointer" "0"] ["update" ":stack" ["fn" ["stack"] ["subvec" "stack" "cursor"]]]]]]]], "util.querystring/parse-query" ["defn" "parse-query" ["search"] ["if" ["=" "search" "|"] ["{}"] ["let" [["content" ["subs" "search" "1"]] ["pairs" ["map" ["fn" ["piece"] ["string/split" "piece" "|="]] ["string/split" "content" "|&"]]]] ["into" ["{}"] "pairs"]]]], "comp.palette/comp-palette" ["def" "comp-palette" ["create-comp" ":palette" "init-state" "update-state" "render"]], "style.widget/entry" ["def" "entry" ["{}" [":display" "|inline-block"] [":background-color" ["hsl" "200" "10" "40" "0"]] [":color" ["hsl" "0" "0" "100"]] [":padding" "|0 8px"] [":cursor" "|pointer"] [":margin-bottom" "|8px"]]], "comp.main-def/comp-main-def" ["def" "comp-main-def" ["create-comp" ":main-def" "init-state" "update-state" "render"]], "util.keycode/key-a" ["def" "key-a" "65"], "comp.ns-creator/comp-ns-creator" ["def" "comp-ns-creator" ["create-comp" ":ns-creator" "init-state" "update-state" "render"]], "util.keycode/key-b" ["def" "key-b" "66"], "comp.palette/on-select" ["defn" "on-select" ["cursor" "commands" "collection"] ["fn" ["dispatch!"] ["handle-command" "cursor" "commands" "collection" "dispatch!"]]], "comp.stack/style-bright" ["def" "style-bright" ["{}" [":color" ["hsl" "0" "0" "90"]]]], "comp.palette/on-keydown" ["defn" "on-keydown" ["mutate!" "commands" "cursor" "collection"] ["fn" ["e" "dispatch!"] ["let" [["code" [":key-code" "e"]] ["total" ["count" "commands"]]] ["cond" [["=" "code" "keycode/key-esc"] ["do" ["mutate!" ["{}" [":text" "|"]]] ["dispatch!" ":router/toggle-palette" "nil"] ["focus!"]]] [["=" "code" "keycode/key-down"] ["if" ["<" "cursor" ["dec" "total"]] ["mutate!" ["{}" [":cursor" ["inc" "cursor"]]]]]] [["=" "code" "keycode/key-up"] ["if" [">" "cursor" "0"] ["mutate!" ["{}" [":cursor" ["dec" "cursor"]]]]]] [["=" "code" "keycode/key-enter"] ["do" ["mutate!" ["{}" [":text" "|"]]] ["handle-command" "cursor" "commands" "collection" "dispatch!"]]] [":else" "nil"]]]]], "comp.modal-stack/style-modal" ["def" "style-modal" ["merge" "ui/center" ["{}" [":background-color" ["hsl" "0" "0" "0" "0.6"]] [":z-index" "900"] [":position" ":fixed"] [":top" "0"] [":right" "0"] [":width" "|100%"] [":height" "|100%"]]]], "comp.definitions/style-list" ["def" "style-list" ["{}" [":max-height" "240"] [":overflow" "|auto"]]], "comp.container/render" ["defn" "render" ["store"] ["fn" ["state" "mutate!"] ["let" [["router" [":router" "store"]]] ["div" ["{}" [":style" ["merge" "ui/global" ["{}" [":background-color" ["hsl" "0" "0" "0"]] [":color" ["hsl" "0" "0" "70"]]]]] [":attrs" ["{}" [":tab-index" "0"]]] [":event" ["{}" [":keydown" "on-keydown"]]]] ["case" [":name" "router"] [":loading" ["comp-loading"]] [":analyzer" ["comp-analyzer" "store"]] [":workspace" ["comp-workspace" "store"]] ["comp-debug" "router" "nil"]] ["comp-notifications" [":notifications" "store"]] ["--" "comp-debug" "router" "nil"] ["if" [":show-palette?" "router"] ["comp-palette" [":collection" "store"]]] ["comp-modal-stack" [":modal-stack" "store"]]]]]], "util.detect/fuzzy-search" ["defn" "fuzzy-search" ["pieces" "queries"] ["every?" ["fn" ["query"] ["some" ["fn" ["piece"] ["string/includes?" "piece" "query"]] "pieces"]] "queries"]], "comp.hot-corner/comp-hot-corner" ["def" "comp-hot-corner" ["create-comp" ":hot-corner" "render"]], "updater.stack/go-next" ["defn" "go-next" ["store" "op-data"] ["->" "store" ["update" ":writer" ["fn" ["writer"] ["if" ["<" [":pointer" "writer"] ["dec" ["count" [":stack" "writer"]]]] ["->" "writer" ["update" ":pointer" "inc"] ["assoc" ":focus" ["[]"]]] "writer"]]]]], "comp.stack/render" ["defn" "render" ["stack" "pointer"] ["fn" ["state" "mutate!"] ["div" ["{}" [":style" ["merge" "ui/flex" "style-container"]]] ["->>" "stack" ["map-indexed" ["fn" ["idx" "item"] ["[]" "idx" ["if" ["string/includes?" ["last" "item"] "|/"] ["let" [[["[]" "ns-part" "var-part"] ["string/split" ["last" "item"] "|/"]]] ["div" ["{}" [":style" "style-bar"] [":event" ["{}" [":click" ["on-click" "idx"]]]]] ["div" ["{}" [":style" ["if" ["=" "idx" "pointer"] "style-bright"]]] ["comp-text" "var-part" "nil"]] ["div" ["{}" [":style" "style-ns"]] ["comp-text" "ns-part" "nil"]]]] ["div" ["{}" [":style" ["merge" "style-ns-main" ["if" ["=" "idx" "pointer"] "style-bright"]]] [":event" ["{}" [":click" ["on-click" "idx"]]]]] ["comp-text" ["last" "item"] "nil"]]]]]]]]]], "updater.collection/edit" ["defn" "edit" ["store" "op-data"] ["let" [["path" "op-data"]] ["->" "store" ["update" ":writer" ["fn" ["writer"] ["let" [["stack" [":stack" "writer"]] ["pos" [".indexOf" "stack" "path"]]] ["if" ["neg?" "pos"] ["->" "writer" ["assoc" ":focus" ["[]"]] ["update" ":pointer" ["fn" ["p"] ["if" ["empty?" "stack"] "p" ["inc" "p"]]]] ["update" ":stack" ["fn" ["stack"] ["if" ["empty?" "stack"] ["[]" "path"] ["conj" ["subvec" "stack" "0" ["inc" [":pointer" "writer"]]] "path"]]]]] ["->" "writer" ["assoc" ":focus" ["[]"]] ["assoc" ":pointer" "pos"]]]]]] ["assoc" ":router" ["{}" [":name" ":workspace"] [":data" "nil"]]]]]], "comp.workspace/on-update" ["defn" "on-update" ["snapshot" "dispatch!"] ["dispatch!" ":collection/write" "snapshot"]], "comp.graph/comp-graph" ["def" "comp-graph" ["create-comp" ":graph" "render"]], "comp.workspace/init-state" ["defn" "init-state" ["&" "args"] ["{}" [":scaled?" "false"]]], "comp.workspace/comp-workspace" ["def" "comp-workspace" ["create-comp" ":workspace" "init-state" "update-state" "render"]], "comp.rename-path/comp-rename-path" ["def" "comp-rename-path" ["create-comp" ":rename-path" "init-state" "update-state" "render"]], "comp.stack/style-ns-main" ["def" "style-ns-main" ["{}" [":padding" "|0 8px"] [":line-height" "|36px"] [":cursor" "|pointer"] [":color" ["hsl" "0" "0" "60"]] [":font-family" "|Hind"] [":font-size" "|13px"] [":white-space" "|nowrap"]]], "comp.graph/render" ["defn" "render" ["store"] ["fn" ["state" "mutate!"] ["div" ["{}"]]]], "actions/submit-changes!" ["defn" "submit-changes!" ["collection" "dispatch!"] ["PATCH" ["str" "|http://" ["get" "options" "|host"] "|:" ["get" "options" "|port"]] ["{}" [":format" ["json-request-format"]] [":body" ["pr-str" ["diff" "@remote-sepal-ref" "collection"]]] [":handler" ["fn" ["response"] ["println" "response"] ["dispatch!" ":notification/add-one" "|Patched"] ["reset!" "remote-sepal-ref" "collection"]]] [":error-handler" ["fn" ["error"] ["println" "error"] ["let" [["response" ["read-string" [":response" "error"]]]] ["dispatch!" ":notification/add-one" [":status" "response"]]]]]]]], "updater.collection/load-remote" ["defn" "load-remote" ["store" "op-data"] ["let" [["collection" "op-data"]] ["--" "println" "|loading:" "collection"] ["->" "store" ["update" ":collection" ["fn" ["cursor"] ["merge" "cursor" "collection"]]] ["assoc-in" ["[]" ":router" ":name"] ":analyzer"]]]], "util.dom/focus-palette!" ["defn" "focus-palette!" [] ["js/requestAnimationFrame" ["fn" [] ["let" [["target" [".querySelector" "js/document" "|#command-palette"]]] ["if" ["some?" "target"] [".focus" "target"]]]]]], "comp.hot-corner/on-switch" ["defn" "on-switch" ["router" "writer"] ["fn" ["e" "dispatch!"] ["if" ["=" [":name" "router"] ":workspace"] ["dispatch!" ":router/route" ["{}" [":name" ":analyzer"] [":data" ":definitions"]]] ["if" ["not" ["empty?" [":stack" "writer"]]] ["dispatch!" ":router/route" ["{}" [":name" ":workspace"] [":data" "nil"]]]]]]], "updater.modal/recycle" ["defn" "recycle" ["store" "op-data" "op-id"] ["update" "store" ":modal-stack" ["fn" ["stack"] ["into" ["[]"] ["butlast" "stack"]]]]], "comp.notifications/comp-notifications" ["def" "comp-notifications" ["create-comp" ":notifications" "render"]], "util.keycode/key-p" ["def" "key-p" "80"], "comp.definitions/by-ns-part" ["defn" "by-ns-part" ["entry"] ["let" [["path" ["first" "entry"]] ["ns-name" ["first" ["string/split" "path" ["re-pattern" "|/"]]]]] "ns-name"]], "style.widget/button" ["def" "button" ["merge" "ui/button" ["{}" [":background-color" ["hsl" "0" "0" "100" "0.2"]] [":color" ["hsl" "0" "0" "100" "0.6"]] [":height" "28"] [":line-height" "|28px"]]]], "comp.define/style-namespace" ["def" "style-namespace" ["{}" [":display" "|inline-block"] [":cursor" "|pointer"]]], "comp.stack/on-click" ["defn" "on-click" ["pointer"] ["fn" ["e" "dispatch!"] ["let" [["event" [":original-event" "e"]] ["command?" ["or" [".-ctrlKey" "event"] [".-metaKey" "event"]]] ["shift?" [".-shiftKey" "event"]]] ["cond" ["command?" ["dispatch!" ":stack/collapse" "pointer"]] ["shift?" ["do" [".preventDefault" "event"] ["dispatch!" ":stack/shift" "pointer"]]] [":else" ["do" ["dispatch!" ":stack/point-to" "pointer"] ["focus!"]]]]]]], "comp.define/init-state" ["defn" "init-state" ["&" "args"] "|"], "util.keycode/key-enter" ["def" "key-enter" "13"], "comp.stack/style-container" ["def" "style-container" ["{}" [":overflow" "|auto"] [":padding" "|16px 0 160px 0"] [":user-select" ":none"]]], "comp.modal-stack/on-recycle" ["defn" "on-recycle" ["e" "dispatch!"] ["dispatch!" ":modal/recycle" "nil"]], "main/ssr-stages" ["def" "ssr-stages" ["let" [["ssr-element" [".querySelector" "js/document" "|#ssr-stages"]] ["ssr-markup" [".getAttribute" "ssr-element" "|content"]]] ["read-string" "ssr-markup"]]], "comp.define/update-state" ["defn" "update-state" ["state" "text"] "text"], "updater.collection/remove-this" ["defn" "remove-this" ["store" "op-data" "op-id"] ["let" [["writer" [":writer" "store"]] ["stack" [":stack" "writer"]] ["pointer" [":pointer" "writer"]] ["path" ["get" "stack" "pointer"]] ["path-name" ["last" "path"]]] ["->" "store" ["update" ":collection" ["fn" ["collection"] ["case" ["first" "path"] [":definitions" ["update" "collection" ":definitions" ["fn" ["definitions"] ["dissoc" "definitions" "path-name"]]]] [":procedures" ["update" "collection" ":procedures" ["fn" ["procedures"] ["if" ["contains?" [":namespaces" "collection"] "path-name"] ["assoc" "procedures" "path-name" ["[]"]] ["dissoc" "procedures" "path-name"]]]]] [":namespaces" ["->" "collection" ["update" ":definitions" ["fn" ["definitions"] ["->>" "definitions" ["filter" ["fn" ["entry"] ["not" ["string/starts-with?" ["first" "entry"] ["str" "path-name" "|/"]]]]] ["into" ["{}"]]]]] ["update" ":namespaces" ["fn" ["namespaces"] ["dissoc" "namespaces" "path-name"]]] ["update" ":procudures" ["fn" ["procedures"] ["println" "procedures"] ["dissoc" "procedures" "path-name"]]]]] "collection"]]] ["update-in" ["[]" ":writer" ":stack"] ["fn" ["stack"] ["cond" [["empty?" "stack"] "stack"] [["zero?" "pointer"] ["subvec" "stack" "1"]] [["=" ["inc" "pointer"] ["count" "stack"]] ["subvec" "stack" "0" ["dec" ["count" "stack"]]]] [":else" ["into" ["[]"] ["concat" ["subvec" "stack" "0" "pointer"] ["subvec" "stack" ["inc" "pointer"]]]]]]]] ["update-in" ["[]" ":writer" ":pointer"] ["fn" ["pointer"] ["if" ["pos?" "pointer"] ["dec" "pointer"] "pointer"]]]]]], "comp.container/comp-container" ["def" "comp-container" ["create-comp" ":container" "render"]], "actions/remote-sepal-ref" ["defonce" "remote-sepal-ref" ["atom" "nil"]], "util.analyze/locate-ns" ["defn" "locate-ns" ["short-form" "this-namespace" "namespaces"] ["if" ["nil?" "this-namespace"] "nil" ["if" ["contains?" "namespaces" "this-namespace"] ["let" [["namespace-data" ["get" "namespaces" "this-namespace"]]] ["if" ["or" ["nil?" "namespace-data"] ["<=" ["count" "namespace-data"] "2"]] "nil" ["let" [["required" ["get" "namespace-data" "2"]] ["rules" ["subvec" "required" "1"]] ["matched-rule" ["->>" "rules" ["filter" ["fn" ["rule"] ["println" "|rule" "rule" "short-form"] ["and" ["=" "|:as" ["get" "rule" "2"]] ["=" "short-form" ["get" "rule" "3"]]]]] ["first"]]]] ["println" "|matched-rule" "matched-rule"] ["if" ["some?" "matched-rule"] ["get" "matched-rule" "1"] "nil"]]]] "nil"]]], "comp.command/style-command" ["def" "style-command" ["{}" [":backgroud-color" ["hsl" "0" "0" "0"]] [":padding" "|0 8px"] [":line-height" "2.4"] [":font-family" "|Source Code Pro, Menlo,monospace"] [":cursor" "|pointer"]]], "comp.palette/render" ["defn" "render" ["collection"] ["fn" ["state" "mutate!"] ["let" [["def-paths" ["->>" ["keys" [":definitions" "collection"]] ["map" ["fn" ["path"] ["[]" "|def" "path"]]]]] ["ns-names" ["->>" ["keys" [":namespaces" "collection"]] ["map" ["fn" ["ns-name"] ["[]" "|ns" "ns-name"]]]]] ["procedure-names" ["->>" ["keys" [":procedures" "collection"]] ["map" ["fn" ["procedure-name"] ["[]" "|proc" "procedure-name"]]]]] ["queries" ["string/split" [":text" "state"] "| "]] ["commands" ["->>" ["concat" "basic-commands" "def-paths" "ns-names" "procedure-names"] ["filter" ["fn" ["command"] ["fuzzy-search" "command" "queries"]]]]]] ["div" ["{}" [":style" ["merge" "ui/fullscreen" "ui/row" "style-container"]]] ["div" ["{}" [":style" ["merge" "ui/column" ["{}" [":background-color" ["hsl" "0" "0" "0" "0.8"]] [":width" "|800px"]]]]] ["input" ["{}" [":style" ["merge" "widget/input" ["{}" [":width" "|100%"] [":line-height" "|40px"]]]] [":attrs" ["{}" [":placeholder" "|write command..."] [":id" "|command-palette"] [":value" [":text" "state"]]]] [":event" ["{}" [":input" ["on-input" "mutate!"]] [":keydown" ["on-keydown" "mutate!" "commands" [":cursor" "state"] "collection"]]]]]] ["div" ["{}" [":style" ["merge" "ui/flex" ["{}" [":overflow" "|auto"]]]]] ["->>" "commands" ["map-indexed" ["fn" ["idx" "command"] ["[]" "idx" ["comp-command" "command" ["=" "idx" [":cursor" "state"]] ["on-select" "idx" "commands" "collection"]]]]]]]]]]]], "comp.analyzer/render" ["defn" "render" ["store"] ["fn" ["state" "mutate!"] ["let" [["router" [":router" "store"]] ["collection" [":collection" "store"]] ["definitions" [":definitions" "collection"]] ["namespaces" [":namespaces" "collection"]] ["procedures" [":procedures" "collection"]]] ["div" ["{}" [":style" ["merge" "ui/fullscreen" "ui/row" ["{}" [":background-color" ["hsl" "0" "0" "0"]]]]]] ["comp-definitions" "definitions" ["keys" "namespaces"] [":package" "collection"]]]]]], "updater.collection/add-procedure" ["defn" "add-procedure" ["store" "op-data"] ["let" [["procedure" "op-data"]] ["assoc-in" "store" ["[]" ":collection" ":procedures" "procedure"] ["[]"]]]], "comp.definitions/comp-definitions" ["def" "comp-definitions" ["create-comp" ":definitions" "render"]], "comp.ns-creator/init-state" ["defn" "init-state" ["pkg"] "|"], "updater.router/toggle-palette" ["defn" "toggle-palette" ["store" "op-data" "op-id"] ["update-in" "store" ["[]" ":router" ":show-palette?"] "not"]], "updater.stack/goto-definition" ["defn" "goto-definition" ["store" "op-data" "op-id"] ["let" [["forced?" "op-data"] ["writer" [":writer" "store"]] ["pointer" [":pointer" "writer"]] ["focus" [":focus" "writer"]] ["stack" [":stack" "writer"]] ["pointer" [":pointer" "writer"]] ["pkg" ["get-in" "store" ["[]" ":collection" ":package"]]] ["definitions" ["get-in" "store" ["[]" ":collection" ":definitions"]]] ["namespaces" ["get-in" "store" ["[]" ":collection" ":namespaces"]]] ["current-def" ["last" ["get" "stack" "pointer"]]] ["drop-pkg" ["fn" ["x"] ["if" ["string?" "x"] ["string/replace" "x" ["str" "pkg" "|."] "|"] "x"]]]] ["println" "|writer" "writer"] ["let" [["target" ["get-in" "store" ["concat" ["[]" ":collection"] ["get" "stack" "pointer"] "focus"]]]] ["if" ["string?" "target"] ["let" [["stripped-target" ["strip-atom" "target"]]] ["if" "forced?" ["if" ["string/includes?" "target" "|/"] ["let" [[["[]" "ns-part" "var-part"] ["string/split" "target" "|/"]] ["current-ns" ["first" ["string/split" "current-def" "|/"]]] ["that-ns" ["drop-pkg" ["locate-ns" "ns-part" "current-ns" "namespaces"]]]] ["if" ["contains?" "namespaces" "that-ns"] ["let" [["new-path" ["str" "that-ns" "|/" "var-part"]]] ["if" ["contains?" "definitions" "new-path"] ["update" "store" ":writer" ["helper-put-path" "new-path"]] ["->" "store" ["update-in" ["[]" ":collection" ":definitions"] ["helper-create-def" "that-ns" "focus" "current-def" "var-part"]] ["update" ":writer" ["helper-put-path" "new-path"]]]]] ["->" "store" ["update" ":notifications" ["helper-notify" "op-id" ["str" "|foreign namespace: " "that-ns"]]]]]] ["let" [["current-ns" ["first" ["string/split" "current-def" "|/"]]] ["ns-part" ["compute-ns" "stripped-target" "current-def" "namespaces" "definitions"]] ["that-ns" ["if" ["some?" "ns-part"] ["drop-pkg" "ns-part"] "current-ns"]] ["new-path" ["str" "that-ns" "|/" "stripped-target"]]] ["println" "|forced piece:" "that-ns" "stripped-target"] ["if" ["contains?" "namespaces" "that-ns"] ["->" "store" ["update-in" ["[]" ":collection" ":definitions"] ["helper-create-def" "that-ns" "focus" "current-def" "stripped-target"]] ["update" ":writer" ["helper-put-path" "new-path"]]] ["->" "store" ["update" ":notifications" ["helper-notify" "op-id" ["str" "|foreign namespace: " "ns-part"]]]]]]] ["let" [["that-ns" ["drop-pkg" ["compute-ns" "stripped-target" "current-def" "namespaces" "definitions"]]] ["var-part" ["last" ["string/split" "stripped-target" "|/"]]] ["current-ns" ["first" ["string/split" "current-def" "|/"]]] ["local-def" ["str" "current-ns" "|/" "var-part"]]] ["println" "|look:" "that-ns" "var-part" "current-ns" "local-def"] ["if" ["contains?" "definitions" "local-def"] ["update" "store" ":writer" ["helper-put-path" "local-def"]] ["if" ["and" ["some?" "that-ns"] ["contains?" "definitions" ["str" "that-ns" "|/" "var-part"]]] ["let" [["path" ["str" "that-ns" "|/" "var-part"]]] ["if" ["=" "path" "current-def"] "store" ["update" "store" ":writer" ["helper-put-path" "path"]]]] ["->" "store" ["update" ":notifications" ["helper-notify" "op-id" ["str" "|no namespace for: " "stripped-target"]]]]]]]]] "store"]]]], "comp.notifications/render" ["defn" "render" ["notifications"] ["fn" ["state" "mutate!"] ["div" ["{}"] ["->>" "notifications" ["map-indexed" ["fn" ["idx" "entry"] ["[]" ["first" "entry"] ["div" ["{}" [":style" ["merge" "style-notification" ["{}" [":top" ["str" ["+" "8" ["*" "40" "idx"]] "|px"]]]]] [":event" ["{}" [":click" ["on-click" "idx"]]]]] ["comp-text" ["last" "entry"] "nil"]]]]]]]]], "main/store-ref" ["defonce" "store-ref" ["atom" "schema/store"]], "comp.definitions/on-edit-definition" ["defn" "on-edit-definition" ["definition-path"] ["fn" ["e" "dispatch!"] ["dispatch!" ":collection/edit" ["[]" ":definitions" "definition-path"]] ["focus!"]]], "util.keycode/key-d" ["def" "key-d" "68"], "comp.palette/update-state" ["def" "update-state" "merge"], "comp.command/on-click" ["defn" "on-click" ["on-select"] ["fn" ["e" "dispatch!"] ["on-select" "dispatch!"]]], "util.keycode/key-j" ["def" "key-j" "74"], "comp.notifications/on-click" ["defn" "on-click" ["idx"] ["fn" ["e" "dispatch!"] ["dispatch!" ":notification/remove-since" "idx"]]], "updater.router/route" ["defn" "route" ["store" "op-data"] ["let" [["router" "op-data"]] ["assoc" "store" ":router" "router"]]], "updater.notification/remove-since" ["defn" "remove-since" ["store" "op-data"] ["let" [["pos" "op-data"]] ["->" "store" ["update" ":notifications" ["fn" ["notifications"] ["take" "pos" "notifications"]]]]]], "util.keycode/key-down" ["def" "key-down" "40"], "comp.palette/init-state" ["defn" "init-state" ["&" "args"] ["{}" [":text" "|"] [":cursor" "0"]]], "actions/options" ["def" "options" ["merge" ["{}" ["|port" "|7010"] ["|host" "|localhost"]] ["parse-query" [".-search" "js/location"]]]], "comp.workspace/on-rename" ["defn" "on-rename" ["code-path"] ["fn" ["e" "dispatch!"] ["println" "|the code path:" "code-path"] ["dispatch!" ":modal/mould" ["{}" [":title" ":rename-path"] [":data" "code-path"]]]]], "util.keycode/key-k" ["def" "key-k" "75"], "comp.notifications/style-notification" ["def" "style-notification" ["{}" [":position" "|fixed"] [":top" "|8px"] [":right" "|8px"] [":transition" "|320ms"] [":line-height" "|32px"] [":white-space" "|nowrap"] [":color" ["hsl" "0" "0" "100"]] [":background-color" ["hsl" "300" "30" "70" "0.3"]] [":z-index" "999"] [":min-width" "|160px"] [":padding" "|0 16px"] [":cursor" "|pointer"] [":border-radius" "|2px"]]], "comp.container/on-keydown" ["defn" "on-keydown" ["e" "dispatch!"]], "util/now!" ["defn" "now!" [] [".now" "js/performance"]], "comp.palette/handle-command" ["defn" "handle-command" ["cursor" "commands" "collection" "dispatch!"] ["let" [["command" ["get" ["into" ["[]"] "commands"] "cursor"]]] ["dispatch!" ":router/toggle-palette" "nil"] ["case" ["first" "command"] ["|load" ["println" "|load"]] ["|save" ["dispatch!" ":effect/submit" ["[]" "false" "collection"]]] ["|def" ["do" ["dispatch!" ":collection/edit" ["[]" ":definitions" ["last" "command"]]] ["focus!"]]] ["|ns" ["do" ["dispatch!" ":collection/edit" ["[]" ":namespaces" ["last" "command"]]] ["focus!"]]] ["|proc" ["do" ["dispatch!" ":collection/edit" ["[]" ":procedures" ["last" "command"]]] ["focus!"]]] "nil"]]], "comp.stack/style-bar" ["def" "style-bar" ["{}" [":padding" "|4px 8px"] [":cursor" "|pointer"] [":color" ["hsl" "0" "0" "60"]] [":font-family" "|Source Code Pro,Menlo,monospace"] [":font-size" "13"] [":line-height" "1.4"] [":white-space" "|nowrap"]]], "updater.stack/helper-create-def" ["defn" "helper-create-def" ["ns-part" "focus" "current-def" "var-part"] ["fn" ["definitions"] ["assoc" "definitions" ["str" "ns-part" "|/" "var-part"] ["if" ["and" ["not" ["empty?" "focus"]] ["zero?" ["last" "focus"]]] ["let" [["expression" ["->" "definitions" ["get" "current-def"] ["get-in" ["butlast" "focus"]]]]] ["if" [">" ["count" "expression"] "1"] ["[]" "|defn" "var-part" ["subvec" "expression" "1"]] ["[]" "|defn" "var-part" ["[]"]]]] ["[]" "|defn" "var-part" ["[]"]]]]]], "util.analyze/locate-ns-by-var" ["defn" "locate-ns-by-var" ["short-form" "this-namespace" "namespaces"] ["println" "|searching" "short-form" "this-namespace" "namespaces"] ["if" ["nil?" "this-namespace"] "nil" ["if" ["contains?" "namespaces" "this-namespace"] ["let" [["namespace-data" ["get" "namespaces" "this-namespace"]]] ["println" "|namespace-data" "namespace-data"] ["if" ["and" ["nil?" "namespace-data"] ["<=" ["count" "namespace-data"] "2"]] "nil" ["if" [">=" ["count" "namespace-data"] "3"] ["let" [["required" ["get" "namespace-data" "2"]] ["rules" ["subvec" "required" "1"]] ["matched-rule" ["->>" "rules" ["filter" ["fn" ["rule"] ["println" "|search rrule:" "rule" "short-form" ["=" "|:refer" ["get" "rule" "1"]]] ["and" ["=" "|:refer" ["get" "rule" "2"]] ["some" ["fn" ["definition"] ["=" "definition" "short-form"]] ["get" "rule" "3"]]]]] ["first"]]]] ["println" "|rules" "matched-rule"] ["if" ["some?" "matched-rule"] ["get" "matched-rule" "1"] "nil"]] "nil"]]] "nil"]]], "updater.stack/go-back" ["defn" "go-back" ["store" "op-data"] ["->" "store" ["update" ":writer" ["fn" ["writer"] ["if" ["pos?" [":pointer" "writer"]] ["->" "writer" ["update" ":pointer" "dec"] ["assoc" ":focus" ["[]"]]] "writer"]]]]], "updater.stack/helper-put-path" ["defn" "helper-put-path" ["path"] ["fn" ["writer"] ["->" "writer" ["update" ":stack" ["fn" ["stack"] ["let" [["next-pointer" ["inc" [":pointer" "writer"]]]] ["if" ["<" ["dec" ["count" "stack"]] "next-pointer"] ["conj" "stack" ["[]" ":definitions" "path"]] ["if" ["=" "path" ["last" ["get" "stack" "next-pointer"]]] "stack" ["conj" ["into" ["[]"] ["subvec" "stack" "0" "next-pointer"]] ["[]" ":definitions" "path"]]]]]]] ["update" ":pointer" "inc"] ["assoc" ":focus" ["[]"]]]]], "comp.definitions/style-file" ["def" "style-file" ["{}" [":display" ":inline-block"] [":vertical-align" ":top"] [":width" "240"] [":margin-top" "16"]]], "actions/submit-collection!" ["defn" "submit-collection!" ["collection" "dispatch!"] ["POST" ["str" "|http://" ["get" "options" "|host"] "|:" ["get" "options" "|port"]] ["{}" [":format" ["json-request-format"]] [":body" ["pr-str" "collection"]] [":handler" ["fn" ["response"] ["println" "response"] ["dispatch!" ":notification/add-one" "|Saved"] ["reset!" "remote-sepal-ref" "collection"]]] [":error-handler" ["fn" ["error"] ["println" "error"] ["let" [["response" ["read-string" [":response" "error"]]]] ["dispatch!" ":notification/add-one" [":status" "response"]]]]]]]], "comp.analyzer/comp-analyzer" ["def" "comp-analyzer" ["create-comp" ":analyzer" "render"]], "updater.stack/point-to" ["defn" "point-to" ["store" "op-data" "op-id"] ["let" [["pointer" "op-data"]] ["assoc-in" "store" ["[]" ":writer" ":pointer"] "pointer"]]], "updater.notification/remove-one" ["defn" "remove-one" ["store" "op-data"] ["let" [["notification-id" "op-data"]] ["->" "store" ["update" ":notifications" ["fn" ["notifications"] ["filterv" ["fn" ["notification"] ["not=" "notification-id" ["first" "notification"]]] "notifications"]]]]]], "comp.stack/comp-stack" ["def" "comp-stack" ["create-comp" ":stack" "render"]], "comp.rename-path/update-state" ["defn" "update-state" ["state" "new-text"] "new-text"], "updater.collection/rename" ["defn" "rename" ["store" "op-data" "op-id"] ["let" [[["[]" "kind" "old-name" "new-name"] "op-data"]] ["update-in" "store" ["[]" ":collection" "kind"] ["fn" ["dict"] ["->" "dict" ["dissoc" "old-name"] ["assoc" "new-name" ["get" "dict" "old-name"]]]]]]], "comp.palette/style-container" ["def" "style-container" ["{}" [":position" "|fixed"] [":background-color" ["hsl" "200" "40" "10" "0.8"]] [":justify-content" "|center"]]], "comp.workspace/on-remove" ["defn" "on-remove" ["e" "dispatch!"] ["dispatch!" ":collection/remove-this" "nil"]], "comp.command/comp-command" ["def" "comp-command" ["create-comp" ":command" "render"]], "comp.definitions/by-var-part" ["defn" "by-var-part" ["code-entry"] ["let" [["path" ["first" "code-entry"]]] ["last" ["string/split" "path" "|/"]]]], "comp.rename-path/render" ["defn" "render" ["code-path"] ["fn" ["state" "mutate!"] ["div" ["{}"] ["div" ["{}"] ["comp-text" ["str" "|Rename in " ["first" "code-path"]] "nil"]] ["div" ["{}"] ["comp-text" ["last" "code-path"] "nil"]] ["div" ["{}"] ["input" ["{}" [":style" ["merge" "ui/input" ["{}" [":width" "400"]]]] [":attrs" ["{}" [":value" "state"]]] [":event" ["{}" [":input" ["on-input" "mutate!"]]]]]] ["comp-space" "16" "nil"] ["div" ["{}" [":style" "widget/button"] [":attrs" ["{}" [":inner-text" "|Rename"]]] [":event" ["{}" [":click" ["on-rename" "code-path" "state"]]]]]]]]]], "comp.rename-path/on-input" ["defn" "on-input" ["mutate!"] ["fn" ["e" "dispatch!"] ["mutate!" [":value" "e"]]]], "util.keycode/key-s" ["def" "key-s" "83"], "comp.workspace/render" ["defn" "render" ["store"] ["fn" ["state" "mutate!"] ["let" [["router" [":router" "store"]] ["writer" [":writer" "store"]] ["stack" ["get-in" "store" ["[]" ":writer" ":stack"]]] ["pointer" ["get-in" "store" ["[]" ":writer" ":pointer"]]] ["code-path" ["get" "stack" "pointer"]] ["tree" ["if" ["some?" "code-path"] ["get-in" "store" ["cons" ":collection" "code-path"]] "nil"]]] ["div" ["{}" [":style" ["merge" "ui/fullscreen" "ui/row" ["{}" [":background-color" ["hsl" "0" "0" "0"]]]]]] ["div" ["{}" [":style" ["merge" "ui/column" ["{}" [":width" "|180px"] [":background-color" ["hsl" "0" "0" "0"]] [":color" ["hsl" "0" "0" "80"]]]]]] ["comp-hot-corner" "router" [":writer" "store"]] ["comp-stack" "stack" "pointer"]] ["--" "comp-debug" "writer" ["{}" [":z-index" "999"] [":background-color" ["hsl" "0" "0" "0"]] [":opacity" "1"]]] ["if" ["some?" "tree"] ["div" ["{}" [":style" ["merge" "ui/column" "ui/flex"]]] ["comp-editor" ["{}" [":tree" "tree"] [":focus" [":focus" "writer"]] [":clipboard" [":clipboard" "writer"]]] "on-update" ["on-command" "store"]] ["div" ["{}" [":style" ["merge" "ui/row" ["{}" [":background-color" ["hsl" "0" "0" "0"]] [":justify-content" "|flex-end"]]]]] ["div" ["{}" [":style" "widget/button"] [":event" ["{}" [":click" ["on-rename" "code-path"]]]] [":attrs" ["{}" [":inner-text" "|Rename"]]]]] ["comp-space" "8" "nil"] ["div" ["{}" [":style" "widget/button"] [":event" ["{}" [":click" "on-remove"]]] [":attrs" ["{}" [":inner-text" "|Remove"]]]]]]] ["div" ["{}" [":style" ["merge" "ui/column" "ui/flex"]]] ["div" ["{}" [":style" "style-removed"]] ["comp-text" "|Tree is be removed." "nil"]]]]]]]], "main/states-ref" ["defonce" "states-ref" ["atom" ["{}"]]], "comp.main-def/on-set-main" ["defn" "on-set-main" ["state"] ["fn" ["e" "dispatch!"] ["let" [["content" "state"]] ["if" ["re-find" ["re-pattern" "|^.+/.+$"] "content"] ["dispatch!" ":collection/set-main" "content"] ["dispatch!" ":notification/add-one" ["str" "|\"" "content" "|\" is invalid"]]]]]], "util.keycode/key-up" ["def" "key-up" "38"], "comp.define/style-proc" ["def" "style-proc" ["{}" [":width" "48"] [":min-width" "48"] [":height" "|24px"] [":line-height" "|24px"] [":cursor" "|pointer"]]], "updater.collection/edit-ns" ["defn" "edit-ns" ["store" "op-data" "op-id"] ["let" [["writer" [":writer" "store"]] ["stack" [":stack" "writer"]] ["pointer" [":pointer" "writer"]] ["path" ["get" "stack" "pointer"]]] ["if" ["=" ["first" "path"] ":namespaces"] ["let" [["ns-name" ["get-in" "store" ["concat" ["[]" ":collection"] "path" [":focus" "writer"]]]]] ["if" ["some?" ["get-in" "store" ["[]" ":collection" ":namespaces" "ns-name"]]] ["update" "store" ":writer" ["fn" ["writer"] ["->" "writer" ["update" ":pointer" "inc"] ["assoc" ":focus" ["[]"]] ["update" ":stack" ["fn" ["stack"] ["conj" ["subvec" "stack" "0" ["inc" "pointer"]] ["[]" ":namespaces" "ns-name"]]]]]]] ["update" "store" ":notifications" ["fn" ["notifications"] ["into" ["[]"] ["cons" ["[]" "op-id" ["str" "|\"" "ns-name" "|\" not found"]] "notifications"]]]]]] ["let" [["ns-part" ["first" ["string/split" ["last" "path"] "|/"]]]] ["update" "store" ":writer" ["fn" ["writer"] ["->" "writer" ["update" ":pointer" "inc"] ["assoc" ":focus" ["[]"]] ["update" ":stack" ["fn" ["stack"] ["conj" ["subvec" "stack" "0" ["inc" "pointer"]] ["[]" ":namespaces" "ns-part"]]]]]]]]]]], "comp.definitions/render" ["defn" "render" ["definitions" "ns-names" "pkg"] ["fn" ["state" "mutate!"] ["let" [["ns-base" ["->>" "ns-names" ["map" ["fn" ["ns-name"] ["[]" "ns-name" ["{}"]]]] ["into" ["{}"]]]] ["grouped" ["merge" "ns-base" ["->>" "definitions" ["group-by" "by-ns-part"]]]]] ["div" ["{}" [":style" ["merge" "ui/flex" "ui/column" "ui/card" ["{}"]]]] ["comp-space" "nil" "|16px"] ["comp-ns-creator" "pkg"] ["comp-space" "nil" "|32px"] ["div" ["{}" [":style" ["merge" "ui/flex" ["{}" [":overflow" "|auto"] [":padding-bottom" "200"]]]]] ["->>" "grouped" ["sort-by" "first"] ["map" ["fn" ["entry"] ["let" [["ns-name" ["first" "entry"]] ["def-codes" ["val" "entry"]]] ["[]" "ns-name" ["div" ["{}" [":style" "style-file"]] ["comp-define" "ns-name"] ["div" ["{}" [":style" "style-list"]] ["->>" "def-codes" ["sort-by" "by-var-part"] ["map" ["fn" ["code-entry"] ["let" [["path" ["first" "code-entry"]] ["var-part" ["last" ["string/split" "path" ["re-pattern" "|/"]]]]] ["[]" "var-part" ["div" ["{}" [":style" "widget/var-entry"] [":event" ["{}" [":click" ["on-edit-definition" "path"]]]] [":attrs" ["{}" [":inner-text" "var-part"]]]]]]]]]]]]]]]]]]]]]], "comp.rename-path/on-rename" ["defn" "on-rename" ["code-path" "text"] ["fn" ["e" "dispatch!"] ["dispatch!" ":collection/rename" ["[]" ["first" "code-path"] ["last" "code-path"] "text"]] ["dispatch!" ":modal/recycle" "nil"]]], "util.keycode/key-esc" ["def" "key-esc" "27"], "comp.loading/comp-loading" ["def" "comp-loading" ["create-comp" ":loading" "render"]], "updater.core/default-handler" ["defn" "default-handler" ["store" "op-data"] "store"], "comp.define/comp-define" ["def" "comp-define" ["create-comp" ":define" "init-state" "update-state" "render"]], "comp.modal-stack/renderer" ["defn" "renderer" ["kind" "title" "data"] ["div" ["{}"] ["case" "title" [":rename-path" ["comp-rename-path" "data"]] ["comp-text" "title" "nil"]]]], "comp.modal-stack/render" ["defn" "render" ["modal-stack"] ["fn" ["state" "mutate!"] ["div" ["{}"] ["->>" "modal-stack" ["map-indexed" ["fn" ["idx" "modal"] ["let" [["kind" [":kind" "modal"]] ["title" [":title" "modal"]] ["data" [":data" "modal"]]] ["[]" "idx" ["div" ["{}" [":style" "style-modal"] [":event" ["{}" [":click" "on-recycle"]]]] ["div" ["{}" [":event" ["{}" [":click" "on-tip"]]]] ["renderer" "kind" "title" "data"]]]]]]]]]]], "comp.loading/style-loading" ["def" "style-loading" ["{}" [":background-color" ["hsl" "200" "40" "10"]] [":justify-content" "|center"] [":color" ["hsl" "0" "0" "80"]] [":font-size" "|32px"] [":font-weight" "|100"] [":font-family" "|Josefin Sans"]]], "comp.main-def/init-state" ["defn" "init-state" ["&" "args"] "|"], "util.keycode/key-e" ["def" "key-e" "69"], "comp.modal-stack/comp-modal-stack" ["def" "comp-modal-stack" ["create-comp" ":modal-stack" "render"]], "comp.hot-corner/render" ["defn" "render" ["router" "writer"] ["fn" ["state" "mutate!"] ["div" ["{}" [":style" ["{}" [":font-size" "|24px"] [":font-weight" "|300"] [":text-align" "|center"] [":cursor" "|pointer"]]] [":event" ["{}" [":click" ["on-switch" "router" "writer"]]]]] ["comp-text" "|Stack Editor" ["{}" [":font-family" "|Josefin Sans"]]]]]], "comp.main-def/on-input" ["defn" "on-input" ["mutate!"] ["fn" ["e" "dispatch!"] ["mutate!" [":value" "e"]]]]}, :namespaces {"updater.router" ["ns" "stack-editor.updater.router"], "comp.loading" ["ns" "stack-editor.comp.loading" [":require" ["[]" "hsl.core" ":refer" ["[]" "hsl"]] ["[]" "respo.alias" ":refer" ["[]" "create-comp" "div"]] ["[]" "respo.comp.text" ":refer" ["[]" "comp-text"]] ["[]" "respo-ui.style" ":as" "ui"]]], "comp.command" ["ns" "stack-editor.comp.command" [":require" ["[]" "clojure.string" ":as" "string"] ["[]" "hsl.core" ":refer" ["[]" "hsl"]] ["[]" "respo.alias" ":refer" ["[]" "create-comp" "div"]] ["[]" "respo.comp.text" ":refer" ["[]" "comp-text"]]]], "util.keycode" ["ns" "stack-editor.util.keycode"], "updater.stack" ["ns" "stack-editor.updater.stack" [":require" ["[]" "clojure.string" ":as" "string"] ["[]" "stack-editor.util.analyze" ":refer" ["[]" "locate-ns" "compute-ns"]] ["[]" "stack-editor.util.detect" ":refer" ["[]" "strip-atom"]] ["[]" "stack-editor.util" ":refer" ["[]" "remove-idx"]]]], "util.analyze" ["ns" "stack-editor.util.analyze" [":require" ["[]" "clojure.string" ":as" "string"]]], "util" ["ns" "stack-editor.util"], "comp.analyzer" ["ns" "stack-editor.comp.analyzer" [":require" ["[]" "hsl.core" ":refer" ["[]" "hsl"]] ["[]" "respo-ui.style" ":as" "ui"] ["[]" "respo.alias" ":refer" ["[]" "create-comp" "div"]] ["[]" "respo.comp.space" ":refer" ["[]" "comp-space"]] ["[]" "stack-editor.comp.definitions" ":refer" ["[]" "comp-definitions"]]]], "comp.workspace" ["ns" "stack-editor.comp.workspace" [":require" ["[]" "hsl.core" ":refer" ["[]" "hsl"]] ["[]" "respo.alias" ":refer" ["[]" "create-comp" "div"]] ["[]" "respo.comp.text" ":refer" ["[]" "comp-text"]] ["[]" "respo.comp.space" ":refer" ["[]" "comp-space"]] ["[]" "respo.comp.debug" ":refer" ["[]" "comp-debug"]] ["[]" "respo-ui.style" ":as" "ui"] ["[]" "stack-editor.comp.hot-corner" ":refer" ["[]" "comp-hot-corner"]] ["[]" "stack-editor.comp.stack" ":refer" ["[]" "comp-stack"]] ["[]" "cirru-editor.comp.editor" ":refer" ["[]" "comp-editor"]] ["[]" "stack-editor.util.keycode" ":as" "keycode"] ["[]" "cirru-editor.util.dom" ":refer" ["[]" "focus!"]] ["[]" "stack-editor.util.dom" ":as" "dom"] ["[]" "stack-editor.style.widget" ":as" "widget"]]], "comp.graph" ["ns" "stack-editor.comp.graph" [":require" ["[]" "hsl.core" ":refer" ["[]" "hsl"]] ["[]" "respo.alias" ":refer" ["[]" "create-comp" "div"]]]], "schema" ["ns" "stack-editor.schema"], "comp.main-def" ["ns" "stack-editor.comp.main-def" [":require" ["[]" "hsl.core" ":refer" ["[]" "hsl"]] ["[]" "respo-ui.style" ":as" "ui"] ["[]" "respo.alias" ":refer" ["[]" "create-comp" "div" "input"]] ["[]" "respo.comp.text" ":refer" ["[]" "comp-text"]] ["[]" "respo.comp.space" ":refer" ["[]" "comp-space"]] ["[]" "stack-editor.style.widget" ":as" "widget"]]], "comp.container" ["ns" "stack-editor.comp.container" [":require" ["[]" "hsl.core" ":refer" ["[]" "hsl"]] ["[]" "respo.alias" ":refer" ["[]" "create-comp" "div" "span"]] ["[]" "respo.comp.text" ":refer" ["[]" "comp-text"]] ["[]" "respo.comp.debug" ":refer" ["[]" "comp-debug"]] ["[]" "respo-ui.style" ":as" "ui"] ["[]" "stack-editor.comp.loading" ":refer" ["[]" "comp-loading"]] ["[]" "stack-editor.comp.analyzer" ":refer" ["[]" "comp-analyzer"]] ["[]" "stack-editor.comp.workspace" ":refer" ["[]" "comp-workspace"]] ["[]" "stack-editor.comp.notifications" ":refer" ["[]" "comp-notifications"]] ["[]" "stack-editor.comp.palette" ":refer" ["[]" "comp-palette"]] ["[]" "stack-editor.comp.modal-stack" ":refer" ["[]" "comp-modal-stack"]] ["[]" "stack-editor.util.keycode" ":as" "keycode"] ["[]" "stack-editor.util.dom" ":as" "dom"] ["[]" "stack-editor.style.widget" ":as" "widget"]]], "comp.modal-stack" ["ns" "stack-editor.comp.modal-stack" [":require" ["[]" "hsl.core" ":refer" ["[]" "hsl"]] ["[]" "respo.alias" ":refer" ["[]" "create-comp" "div" "span"]] ["[]" "respo.comp.text" ":refer" ["[]" "comp-text"]] ["[]" "respo.comp.debug" ":refer" ["[]" "comp-debug"]] ["[]" "respo-ui.style" ":as" "ui"] ["[]" "stack-editor.style.widget" ":as" "widget"] ["[]" "stack-editor.comp.rename-path" ":refer" ["[]" "comp-rename-path"]]]], "comp.rename-path" ["ns" "stack-editor.comp.rename-path" [":require" ["[]" "respo.alias" ":refer" ["[]" "create-comp" "div" "input"]] ["[]" "respo.comp.text" ":refer" ["[]" "comp-text"]] ["[]" "respo.comp.space" ":refer" ["[]" "comp-space"]] ["[]" "respo-ui.style" ":as" "ui"] ["[]" "stack-editor.style.widget" ":as" "widget"]]], "comp.definitions" ["ns" "stack-editor.comp.definitions" [":require" ["[]" "hsl.core" ":refer" ["[]" "hsl"]] ["[]" "clojure.string" ":as" "string"] ["[]" "respo.alias" ":refer" ["create-comp" "div" "input"]] ["[]" "respo.comp.space" ":refer" ["[]" "comp-space"]] ["[]" "respo.comp.text" ":refer" ["[]" "comp-text"]] ["[]" "respo.comp.debug" ":refer" ["[]" "comp-debug"]] ["[]" "respo-ui.style" ":as" "ui"] ["[]" "stack-editor.comp.main-def" ":refer" ["[]" "comp-main-def"]] ["[]" "respo-border.transform.space" ":refer" ["[]" "interpose-spaces"]] ["[]" "stack-editor.style.widget" ":as" "widget"] ["[]" "cirru-editor.util.dom" ":refer" ["[]" "focus!"]] ["[]" "stack-editor.comp.define" ":refer" ["[]" "comp-define"]] ["[]" "stack-editor.comp.ns-creator" ":refer" ["[]" "comp-ns-creator"]]]], "util.dom" ["ns" "stack-editor.util.dom"], "main" ["ns" "stack-editor.main" [":require" ["[]" "respo.core" ":refer" ["[]" "render!" "clear-cache!" "render-element" "falsify-stage!" "gc-states!"]] ["[]" "stack-editor.schema" ":as" "schema"] ["[]" "stack-editor.comp.container" ":refer" ["[]" "comp-container"]] ["[]" "cljs.reader" ":refer" ["[]" "read-string"]] ["[]" "stack-editor.updater.core" ":refer" ["[]" "updater"]] ["[]" "stack-editor.util.keycode" ":as" "keycode"] ["[]" "stack-editor.util.dom" ":as" "dom"] ["[]" "stack-editor.util" ":refer" ["[]" "now!"]] ["[]" "stack-editor.actions" ":refer" ["[]" "load-collection!" "submit-collection!" "submit-changes!"]]]], "updater.notification" ["ns" "stack-editor.updater.notification"], "comp.define" ["ns" "stack-editor.comp.define" [":require" ["[]" "hsl.core" ":refer" ["[]" "hsl"]] ["[]" "respo.alias" ":refer" ["[]" "create-comp" "div" "input"]] ["[]" "respo.comp.text" ":refer" ["[]" "comp-text"]] ["[]" "respo.comp.space" ":refer" ["[]" "comp-space"]] ["[]" "respo.comp.debug" ":refer" ["[]" "comp-debug"]] ["[]" "respo-ui.style" ":as" "ui"] ["[]" "stack-editor.style.widget" ":as" "widget"] ["[]" "stack-editor.util.keycode" ":as" "keycode"]]], "comp.palette" ["ns" "stack-editor.comp.palette" [":require" ["[]" "clojure.string" ":as" "string"] ["[]" "hsl.core" ":refer" ["[]" "hsl"]] ["[]" "respo.alias" ":refer" ["[]" "create-comp" "div" "input"]] ["[]" "respo-ui.style" ":as" "ui"] ["[]" "respo.comp.text" ":refer" ["[]" "comp-text"]] ["[]" "cirru-editor.util.dom" ":refer" ["[]" "focus!"]] ["[]" "stack-editor.comp.command" ":refer" ["[]" "comp-command"]] ["[]" "stack-editor.util.keycode" ":as" "keycode"] ["[]" "stack-editor.style.widget" ":as" "widget"] ["[]" "stack-editor.util.detect" ":refer" ["[]" "fuzzy-search"]]]], "comp.ns-creator" ["ns" "stack-editor.comp.ns-creator" [":require" ["[]" "clojure.string" ":as" "string"] ["[]" "respo.alias" ":refer" ["[]" "create-comp" "div" "input"]] ["[]" "hsl.core" ":refer" ["[]" "hsl"]] ["[]" "respo.comp.text" ":refer" ["[]" "comp-text"]] ["[]" "respo.comp.space" ":refer" ["[]" "comp-space"]] ["[]" "stack-editor.style.widget" ":as" "widget"]]], "updater.core" ["ns" "stack-editor.updater.core" [":require" ["[]" "stack-editor.updater.router" ":as" "router"] ["[]" "stack-editor.updater.collection" ":as" "collection"] ["[]" "stack-editor.updater.notification" ":as" "notification"] ["[]" "stack-editor.updater.stack" ":as" "stack"] ["[]" "stack-editor.updater.modal" ":as" "modal"]]], "comp.stack" ["ns" "stack-editor.comp.stack" [":require" ["[]" "hsl.core" ":refer" ["[]" "hsl"]] ["[]" "clojure.string" ":as" "string"] ["[]" "respo-ui.style" ":as" "ui"] ["[]" "cirru-editor.util.dom" ":refer" ["[]" "focus!"]] ["[]" "respo.alias" ":refer" ["[]" "create-comp" "div"]] ["[]" "respo.comp.text" ":refer" ["[]" "comp-text"]] ["[]" "respo.comp.space" ":refer" ["[]" "comp-space"]] ["[]" "respo.comp.debug" ":refer" ["[]" "comp-debug"]]]], "comp.notifications" ["ns" "stack-editor.comp.notifications" [":require" ["[]" "hsl.core" ":refer" ["[]" "hsl"]] ["[]" "respo-ui.style" ":as" "ui"] ["[]" "respo.alias" ":refer" ["[]" "create-comp" "div"]] ["[]" "respo.comp.text" ":refer" ["[]" "comp-text"]]]], "util.querystring" ["ns" "stack-editor.util.querystring" [":require" ["[]" "clojure.string" ":as" "string"]]], "util.detect" ["ns" "stack-editor.util.detect" [":require" ["[]" "clojure.string" ":as" "string"]]], "updater.modal" ["ns" "stack-editor.updater.modal"], "updater.collection" ["ns" "stack-editor.updater.collection" [":require" ["[]" "clojure.string" ":as" "string"]]], "comp.hot-corner" ["ns" "stack-editor.comp.hot-corner" [":require" ["[]" "hsl.core" ":refer" ["[]" "hsl"]] ["[]" "respo.alias" ":refer" ["[]" "create-comp" "div" "span"]] ["[]" "respo.comp.text" ":refer" ["[]" "comp-text"]] ["[]" "respo.comp.space" ":refer" ["[]" "comp-space"]] ["[]" "respo-ui.style" ":as" "ui"]]], "actions" ["ns" "stack-editor.actions" [":require" ["[]" "cljs.reader" ":refer" ["[]" "read-string"]] ["[]" "ajax.core" ":refer" ["[]" "GET" "POST" "PATCH" "json-request-format"]] ["[]" "stack-editor.util.querystring" ":refer" ["[]" "parse-query"]] ["[]" "shallow-diff.diff" ":refer" ["[]" "diff"]]]], "style.widget" ["ns" "stack-editor.style.widget" [":require" ["[]" "hsl.core" ":refer" ["[]" "hsl"]] ["[]" "respo-ui.style" ":as" "ui"]]]}, :procedures {"updater.router" [], "comp.loading" [], "comp.command" [], "util.keycode" [], "updater.stack" [], "comp.settings" [], "util.analyze" [], "util" [], "comp.analyzer" [], "comp.workspace" [], "comp.graph" [], "schema" [], "comp.main-def" [], "comp.container" [], "comp.modal-stack" [], "comp.rename-path" [], "comp.definitions" [], "util.dom" [], "main" [["set!" "js/window.onload" "-main!"]], "updater.notification" [], "comp.define" [], "comp.orphans" [], "comp.palette" [], "comp.ns-creator" [], "comp.navigator" [], "updater.core" [], "comp.namespaces" [], "comp.stack" [], "comp.notifications" [], "util.querystring" [], "util.time" [], "util.detect" [], "updater.modal" [], "updater.collection" [], "demo" [], "comp.hot-corner" [], "actions" [], "comp.procedures" [], "style.widget" []}, :package "stack-editor"}